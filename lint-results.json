[{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\api\\articles\\delete\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":54,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":54,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1699,1702],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1699,1702],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { supabaseAdmin } from '@/lib/supabaseAdmin';\r\n\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const { articleId } = await request.json();\r\n\r\n        if (!articleId) {\r\n            return NextResponse.json({ error: 'Article ID is required' }, { status: 400 });\r\n        }\r\n\r\n        // 1. Get the article\r\n        const { data: article, error: fetchError } = await supabaseAdmin\r\n            .from('articles')\r\n            .select('title')\r\n            .eq('id', articleId)\r\n            .single();\r\n\r\n        if (fetchError || !article) {\r\n            return NextResponse.json({ error: 'Article not found' }, { status: 404 });\r\n        }\r\n\r\n        // Generate slug\r\n        const slug = article.title\r\n            .toLowerCase()\r\n            .replace(/[^\\w\\s-]/g, '')\r\n            .replace(/\\s+/g, '-');\r\n\r\n        // 2. Delete from blog_articles (public blog) if published\r\n        await supabaseAdmin\r\n            .from('blog_articles')\r\n            .delete()\r\n            .eq('slug', slug);\r\n\r\n        // 3. Delete from publish_queue\r\n        await supabaseAdmin\r\n            .from('publish_queue')\r\n            .delete()\r\n            .eq('article_id', articleId);\r\n\r\n        // 4. Delete the article itself\r\n        const { error: deleteError } = await supabaseAdmin\r\n            .from('articles')\r\n            .delete()\r\n            .eq('id', articleId);\r\n\r\n        if (deleteError) {\r\n            return NextResponse.json({ error: deleteError.message }, { status: 500 });\r\n        }\r\n\r\n        return NextResponse.json({ success: true, message: `Deleted: ${article.title}` });\r\n\r\n    } catch (error: any) {\r\n        console.error('Delete error:', error);\r\n        return NextResponse.json({ error: error.message }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\api\\articles\\unpublish\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":88,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":88,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3487,3490],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3487,3490],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextRequest, NextResponse } from 'next/server';\r\nimport { supabaseAdmin } from '@/lib/supabaseAdmin';\r\n\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        const { articleId } = await request.json();\r\n\r\n        if (!articleId) {\r\n            return NextResponse.json({ error: 'Article ID is required' }, { status: 400 });\r\n        }\r\n\r\n        // 1. Get the article to find its slug\r\n        const { data: article, error: fetchError } = await supabaseAdmin\r\n            .from('articles')\r\n            .select('title')\r\n            .eq('id', articleId)\r\n            .single();\r\n\r\n        if (fetchError || !article) {\r\n            return NextResponse.json({ error: 'Article not found' }, { status: 404 });\r\n        }\r\n\r\n        // Generate slug\r\n        const slug = article.title\r\n            .toLowerCase()\r\n            .replace(/[^\\w\\s-]/g, '')\r\n            .replace(/\\s+/g, '-');\r\n\r\n        // 2. Delete from blog_articles (public blog) - BYPASSES RLS\r\n        const { error: deleteError } = await supabaseAdmin\r\n            .from('blog_articles')\r\n            .delete()\r\n            .eq('slug', slug);\r\n\r\n        if (deleteError) {\r\n            console.error('Error removing from blog_articles:', deleteError);\r\n            return NextResponse.json({ error: deleteError.message }, { status: 500 });\r\n        }\r\n\r\n        // 3. Update article status back to 'ready'\r\n        await supabaseAdmin\r\n            .from('articles')\r\n            .update({ status: 'ready', publish_date: null })\r\n            .eq('id', articleId);\r\n\r\n        // 4. Remove from publish_queue if exists\r\n        await supabaseAdmin\r\n            .from('publish_queue')\r\n            .delete()\r\n            .eq('article_id', articleId);\r\n\r\n        // 5. Trigger GitHub Actions Website Rebuild (to remove article from static site)\r\n        const githubToken = process.env.GITHUB_PAT;\r\n        const repoOwner = process.env.GITHUB_REPO_OWNER || 'gsdminers-spec';\r\n        const repoName = process.env.GITHUB_REPO_NAME || 'asicrepair.test1';\r\n        const workflowFile = 'deploy.yml';\r\n\r\n        if (githubToken) {\r\n            try {\r\n                const deployResponse = await fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/actions/workflows/${workflowFile}/dispatches`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Accept': 'application/vnd.github.v3+json',\r\n                        'Authorization': `Bearer ${githubToken}`,\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify({\r\n                        ref: 'main',\r\n                    }),\r\n                });\r\n\r\n                if (deployResponse.ok) {\r\n                    console.log(`üöÄ Rebuild triggered after unpublishing: ${article.title}`);\r\n                } else {\r\n                    const errorText = await deployResponse.text();\r\n                    console.error(`‚ö†Ô∏è Failed to trigger rebuild after unpublish: ${deployResponse.status} ${errorText}`);\r\n                }\r\n            } catch (deployError) {\r\n                console.error('‚ö†Ô∏è Deployment trigger exception on unpublish:', deployError);\r\n            }\r\n        } else {\r\n            console.log('‚ÑπÔ∏è GITHUB_PAT not found. Skipping automated rebuild trigger after unpublish.');\r\n        }\r\n\r\n        return NextResponse.json({ success: true, message: `Unpublished: ${article.title}` });\r\n\r\n    } catch (error: any) {\r\n        console.error('Unpublish error:', error);\r\n        return NextResponse.json({ error: error.message }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\api\\auth\\login\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":28,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":28,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { NextResponse } from 'next/server';\r\nimport { createSession } from '@/lib/auth';\r\nimport { logActivity } from '@/lib/logger';\r\n\r\n// Hardcoded hash for \"Ashmira@143\" (SHA-256)\r\n// Generated online for simplicity, or we can compute on fly. \r\n// For \"Ashmira@143\":\r\n// roughly: 24707f15436683515468770289d0b074092b774618a82d2360538965f3f37478 (example)\r\n// But for simplicity in this demo, we'll compare string directly OR compute hash.\r\n// Let's do simple string compare for now per user request context (admin tool).\r\n// Ideally: Use bcrypt/argon2.\r\nconst CORRECT_PASSWORD = 'Ashmira@143';\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const { password } = await request.json();\r\n\r\n        if (password === CORRECT_PASSWORD) {\r\n            await createSession();\r\n            await logActivity('LOGIN', 'System', 'Admin logged in');\r\n            return NextResponse.json({ success: true });\r\n        }\r\n\r\n        await logActivity('ERROR', 'System', 'Failed login attempt');\r\n        return NextResponse.json({ success: false, error: 'Invalid password' }, { status: 401 });\r\n\r\n    } catch (e) {\r\n        return NextResponse.json({ success: false, error: 'Server error' }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\api\\auth\\logout\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\api\\cron\\auto-publish\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'secret' is assigned a value but never used.","line":44,"column":15,"nodeType":"Identifier","messageId":"unusedVar","endLine":44,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@supabase/supabase-js';\r\nimport { marked } from 'marked';\r\nimport { NextRequest, NextResponse } from 'next/server';\r\n\r\n// Type for the joined query result\r\ninterface QueueItemWithArticle {\r\n    id: string;\r\n    article_id: string;\r\n    scheduled_date: string;\r\n    scheduled_time: string;\r\n    status: string;\r\n    articles: {\r\n        id: string;\r\n        title: string;\r\n        content: string;\r\n        category: string;\r\n    } | null;\r\n}\r\n\r\n/**\r\n * Auto-publish cron endpoint\r\n * Checks publish_queue for scheduled articles and publishes them if the time has passed\r\n * \r\n * Call this endpoint periodically (e.g., every minute via Vercel Cron or external service)\r\n * \r\n * GET /api/cron/auto-publish\r\n * Optional: Add ?secret=YOUR_SECRET for security\r\n */\r\nexport async function GET(request: NextRequest) {\r\n    // --- INIT ADMIN CLIENT ---\r\n    const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\n    const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\r\n\r\n    if (!supabaseUrl || !supabaseServiceKey) {\r\n        console.error('[Auto-Publish] Missing Supabase Service Key');\r\n        return NextResponse.json({ error: 'Server configuration error' }, { status: 500 });\r\n    }\r\n\r\n    const supabase = createClient(supabaseUrl, supabaseServiceKey);\r\n\r\n    try {\r\n        // Optional: Verify cron secret for security\r\n        const { searchParams } = new URL(request.url);\r\n        const secret = searchParams.get('secret');\r\n\r\n        // Uncomment this to enable secret verification\r\n        // if (secret !== process.env.CRON_SECRET) {\r\n        //     return NextResponse.json({ error: 'Unauthorized' }, { status: 401 });\r\n        // }\r\n\r\n        // Get current time in IST (GMT+5:30)\r\n        const now = new Date();\r\n        const istOffset = 5.5 * 60 * 60 * 1000;\r\n        const istNow = new Date(now.getTime() + istOffset);\r\n\r\n        const currentDate = istNow.toISOString().split('T')[0];\r\n        const currentTime = istNow.toISOString().split('T')[1].slice(0, 8);\r\n\r\n        console.log(`[Auto-Publish] Checking at ${currentDate} ${currentTime} IST`);\r\n\r\n        // Fetch scheduled articles that are due\r\n        const { data: dueItems, error: fetchError } = await supabase\r\n            .from('publish_queue')\r\n            .select(`\r\n                id,\r\n                article_id,\r\n                scheduled_date,\r\n                scheduled_time,\r\n                status,\r\n                articles (\r\n                    id,\r\n                    title,\r\n                    content,\r\n                    category\r\n                )\r\n            `)\r\n            .eq('status', 'scheduled')\r\n            .lte('scheduled_date', currentDate);\r\n\r\n        if (fetchError) {\r\n            console.error('[Auto-Publish] Error fetching queue:', fetchError);\r\n            return NextResponse.json({ error: fetchError.message }, { status: 500 });\r\n        }\r\n\r\n        if (!dueItems || dueItems.length === 0) {\r\n            return NextResponse.json({\r\n                message: 'No articles due for publishing',\r\n                checked_at: `${currentDate} ${currentTime} IST`\r\n            });\r\n        }\r\n\r\n        // Cast to typed array\r\n        const typedItems = dueItems as unknown as QueueItemWithArticle[];\r\n\r\n        // Filter items where scheduled time has passed\r\n        const readyToPublish = typedItems.filter(item => {\r\n            if (item.scheduled_date < currentDate) return true;\r\n            if (item.scheduled_date === currentDate && item.scheduled_time <= currentTime) return true;\r\n            return false;\r\n        });\r\n\r\n        if (readyToPublish.length === 0) {\r\n            return NextResponse.json({\r\n                message: 'No articles ready yet',\r\n                pending: dueItems.length,\r\n                checked_at: `${currentDate} ${currentTime} IST`\r\n            });\r\n        }\r\n\r\n        const published: { id: string; title: string; slug: string; scheduled: string }[] = [];\r\n        const errors: { id: string; title?: string; error: string }[] = [];\r\n\r\n        for (const item of readyToPublish) {\r\n            try {\r\n                const article = item.articles;\r\n                if (!article) {\r\n                    errors.push({ id: item.id, error: 'Article not found' });\r\n                    continue;\r\n                }\r\n\r\n                // Generate slug\r\n                const slug = article.title\r\n                    .toLowerCase()\r\n                    .replace(/[^\\w\\s-]/g, '')\r\n                    .replace(/\\s+/g, '-');\r\n\r\n                // Convert markdown to HTML\r\n                const contentHtml = marked.parse(article.content || '');\r\n\r\n                // Upsert to blog_articles (public blog table)\r\n                // Clean HTML - website has its own responsive prose styling\r\n                const { error: upsertError } = await supabase\r\n                    .from('blog_articles')\r\n                    .upsert({\r\n                        title: article.title,\r\n                        slug: slug,\r\n                        content: article.content,\r\n                        content_html: contentHtml as string,\r\n                        category: article.category || 'Uncategorized',\r\n                        is_published: true,\r\n                        published_date: new Date().toISOString(),\r\n                        updated_date: new Date().toISOString()\r\n                    }, { onConflict: 'slug' });\r\n\r\n                if (upsertError) {\r\n                    errors.push({ id: item.id, title: article.title, error: upsertError.message });\r\n                    continue;\r\n                }\r\n\r\n                // Update publish_queue status\r\n                await supabase\r\n                    .from('publish_queue')\r\n                    .update({ status: 'published' })\r\n                    .eq('id', item.id);\r\n\r\n                // Update article status in admin\r\n                await supabase\r\n                    .from('articles')\r\n                    .update({\r\n                        status: 'published',\r\n                        publish_date: new Date().toISOString()\r\n                    })\r\n                    .eq('id', article.id);\r\n\r\n                published.push({\r\n                    id: item.id,\r\n                    title: article.title,\r\n                    slug: slug,\r\n                    scheduled: `${item.scheduled_date} ${item.scheduled_time}`\r\n                });\r\n\r\n                console.log(`[Auto-Publish] ‚úÖ Published: ${article.title}`);\r\n\r\n            } catch (err: unknown) {\r\n                const errorMessage = err instanceof Error ? err.message : 'Unknown error';\r\n                errors.push({ id: item.id, error: errorMessage });\r\n            }\r\n        }\r\n\r\n        return NextResponse.json({\r\n            success: true,\r\n            published: published.length,\r\n            errors: errors.length,\r\n            details: {\r\n                published,\r\n                errors\r\n            },\r\n            checked_at: `${currentDate} ${currentTime} IST`\r\n        });\r\n\r\n    } catch (error: unknown) {\r\n        console.error('[Auto-Publish] Fatal error:', error);\r\n        const errorMessage = error instanceof Error ? error.message : 'Unknown error';\r\n        return NextResponse.json({ error: errorMessage }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\api\\generate\\article\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":119,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4746,4749],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4746,4749],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\nimport { smartGenerate } from '@/lib/ai/openrouter';\r\n\r\nexport const maxDuration = 300; // Allow 5 minutes for the full consensus chain\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const { topic, scrapedData, preferences } = await req.json();\r\n\r\n        if (!topic) {\r\n            return NextResponse.json({ error: 'Topic is required' }, { status: 400 });\r\n        }\r\n\r\n        // -----------------------------------------------------------------------\r\n        // STEP 0: PREPARE CONTEXT\r\n        // -----------------------------------------------------------------------\r\n        const researchContext = scrapedData\r\n            ? `RESEARCH DATA:\\n${JSON.stringify(scrapedData)}\\n\\n`\r\n            : 'NO RESEARCH DATA AVAILABLE. Rely on your internal knowledge.\\n\\n';\r\n\r\n        const userNotes = preferences?.additionalNotes\r\n            ? `USER NOTES: ${preferences.additionalNotes}\\n\\n`\r\n            : '';\r\n\r\n        console.log(`üöÄ [Deep Consensus] Starting generation for: \"${topic}\"`);\r\n\r\n        // -----------------------------------------------------------------------\r\n        // STEP 1: THE RESEARCHER (Synthesize technical facts)\r\n        // -----------------------------------------------------------------------\r\n        const researcherPrompt = `\r\n        ANALYZE the provided research data and extraction Technical Facts for the topic: \"${topic}\".\r\n        \r\n        ${researchContext}\r\n\r\n        OUTPUT FORMAT:\r\n        - List of Technical Specifications\r\n        - List of Common Failure Points\r\n        - List of Repair/Diagnostic Steps\r\n        - Any conflicting information found in the data\r\n        \r\n        Keep it purely factual. No fluff.\r\n        `;\r\n\r\n        const phase1Result = await smartGenerate('RESEARCHER', researcherPrompt, \"You are a Senior Technical Researcher.\");\r\n        console.log(\"‚úÖ [Phase 1] Researcher complete.\");\r\n\r\n        // -----------------------------------------------------------------------\r\n        // STEP 2: THE REASONER (Deep Dive & Logic Check)\r\n        // -----------------------------------------------------------------------\r\n        const reasonerPrompt = `\r\n        Review these Technical Facts and provide a \"Deep Dive\" analysis.\r\n        \r\n        TOPIC: ${topic}\r\n        FACTS:\r\n        ${phase1Result}\r\n\r\n        GOAL:\r\n        - Explain *WHY* these failures happen (Root Cause Analysis).\r\n        - Identify any logical gaps in the repair steps.\r\n        - Add expert \"Pro Tips\" that aren't obvious provided inputs.\r\n        - Create a \"Theory of Operation\" for the device/component.\r\n        \r\n        ${userNotes}\r\n        `;\r\n\r\n        const phase2Result = await smartGenerate('REASONER', reasonerPrompt, \"You are a Principal Engineer and Logic Analyst.\");\r\n        console.log(\"‚úÖ [Phase 2] Reasoner complete.\");\r\n\r\n        // -----------------------------------------------------------------------\r\n        // STEP 3: THE OUTLINER (Structural Skeleton)\r\n        // -----------------------------------------------------------------------\r\n        const outlinerPrompt = `\r\n        Create a perfect Blog Post Outline for: \"${topic}\".\r\n        \r\n        Reflect the \"Deep Dive\" insights in the structure.\r\n        \r\n        INSIGHTS:\r\n        ${phase2Result}\r\n\r\n        REQUIREMENTS:\r\n        - SEO-optimized H1 Title.\r\n        - Logical H2/H3 hierarchy.\r\n        - Section for \"Diagnostics\", \"Tools Needed\", and \"Step-by-Step Repair\".\r\n        - FAQ Section.\r\n        \r\n        Output *ONLY* the Markdown Outline.\r\n        `;\r\n\r\n        const phase3Result = await smartGenerate('OUTLINER', outlinerPrompt, \"You are a Content Strategist.\");\r\n        console.log(\"‚úÖ [Phase 3] Outliner complete.\");\r\n\r\n        // -----------------------------------------------------------------------\r\n        // STEP 4: THE WRITER (Final Content Generation)\r\n        // -----------------------------------------------------------------------\r\n        const writerPrompt = `\r\n        Write the FULL Final Blog Article.\r\n        \r\n        TOPIC: ${topic}\r\n        OUTLINE:\r\n        ${phase3Result}\r\n        \r\n        TECHNICAL DEEP DIVE (Incorporate these insights!):\r\n        ${phase2Result}\r\n        \r\n        RAW FACTS:\r\n        ${phase1Result}\r\n        \r\n        ${userNotes}\r\n\r\n        TONE: Professional, Authoritative, Technician-focused.\r\n        FORMAT: Markdown.\r\n        `;\r\n\r\n        const finalArticle = await smartGenerate('WRITER', writerPrompt, \"You are an Expert Technical Writer.\");\r\n        console.log(\"‚úÖ [Phase 4] Writer complete.\");\r\n\r\n        return NextResponse.json({ success: true, article: finalArticle, debug: { p1: phase1Result, p2: phase2Result, p3: phase3Result } });\r\n\r\n    } catch (error: any) {\r\n        console.error('Deep Consensus Error:', error);\r\n        return NextResponse.json({ error: error.message || 'Failed to generate article' }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\api\\prompt\\generate\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":43,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":43,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1754,1757],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1754,1757],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const { topic, scrapedData } = await req.json();\r\n        const apiKey = process.env.GEMINI_API_KEY;\r\n\r\n        if (!topic) {\r\n            return NextResponse.json({ error: 'Topic is required' }, { status: 400 });\r\n        }\r\n\r\n        if (!apiKey) {\r\n            return NextResponse.json({ error: 'GEMINI_API_KEY is not configured' }, { status: 500 });\r\n        }\r\n\r\n        const genAI = new GoogleGenerativeAI(apiKey);\r\n        // Switching to stable alias: gemini-flash-latest\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-flash-latest\" });\r\n\r\n        const context = scrapedData\r\n            ? `Use the following research data to inform your prompt:\\n${JSON.stringify(scrapedData)}\\n\\n`\r\n            : '';\r\n\r\n        const systemPrompt = `You are an expert prompt engineer for an AI blog writer. \r\n    Create a detailed, structured prompt that will guide another AI to write a comprehensive blog article about: \"${topic}\".\r\n    \r\n    ${context}\r\n\r\n    The generated prompt should:\r\n    1. Define the role (Expert ASIC Repair Technician).\r\n    2. Outline the article structure (Intro, Technical Deep Dive, Diagnostics, Repair Steps, Conclusion).\r\n    3. Specify tone (Professional, Technical, Authoritative).\r\n    4. Request specific SEO keywords if relevant.\r\n    \r\n    Return ONLY the prompt text, no introductory commentary.`;\r\n\r\n        const result = await model.generateContent(systemPrompt);\r\n        const generatedPrompt = result.response.text();\r\n\r\n        return NextResponse.json({ success: true, prompt: generatedPrompt });\r\n\r\n    } catch (error: any) {\r\n        console.error('Prompt Generation CRASH:', error);\r\n        console.error('Stack:', error.stack);\r\n        return NextResponse.json({ error: error.message || 'Failed to generate prompt' }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\api\\publish\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":119,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5243,5246],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5243,5246],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { createClient } from '@supabase/supabase-js';\r\nimport { NextResponse } from 'next/server';\r\nimport { marked } from 'marked';\r\n\r\nexport async function POST(request: Request) {\r\n    try {\r\n        const body = await request.json();\r\n        const { queueId, articleId } = body;\r\n\r\n        if (!queueId || !articleId) {\r\n            return NextResponse.json({ error: 'Missing queueId or articleId' }, { status: 400 });\r\n        }\r\n\r\n        const supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\n        const supabaseServiceKey = process.env.SUPABASE_SERVICE_ROLE_KEY;\r\n\r\n        if (!supabaseUrl || !supabaseServiceKey) {\r\n            console.error('Supabase credentials missing on server');\r\n            return NextResponse.json({ error: 'Server configuration error: Missing Supabase Credentials' }, { status: 500 });\r\n        }\r\n\r\n        const supabase = createClient(supabaseUrl, supabaseServiceKey);\r\n\r\n        // 1. Update publish_queue status\r\n        // We do this with Service Role to ensure it works even if RLS is strict\r\n        const { error: queueError } = await supabase\r\n            .from('publish_queue')\r\n            .update({ status: 'published' })\r\n            .eq('id', queueId);\r\n\r\n        if (queueError) {\r\n            throw new Error('Queue update failed: ' + queueError.message);\r\n        }\r\n\r\n        // 2. Update article status\r\n        const { data: articleData, error: articleError } = await supabase\r\n            .from('articles')\r\n            .update({\r\n                status: 'published',\r\n                publish_date: new Date().toISOString()\r\n            })\r\n            .eq('id', articleId)\r\n            .select('*')\r\n            .single();\r\n\r\n        if (articleError || !articleData) {\r\n            throw new Error('Article update failed: ' + (articleError?.message || 'Article not found'));\r\n        }\r\n\r\n        // 3. Sync to Public Blog (Bypassing RLS)\r\n        const slug = articleData.title\r\n            .toLowerCase()\r\n            .replace(/[^\\w\\s-]/g, '')\r\n            .replace(/\\s+/g, '-');\r\n\r\n        // marked.parse can be synchronous or return a Promise depending on options/extensions.\r\n        // Awaiting it is safe.\r\n        const contentHtml = await marked.parse(articleData.content || '');\r\n\r\n        // Note: We store clean HTML - the public website has its own prose styling classes\r\n        const { error: syncError } = await supabase\r\n            .from('blog_articles')\r\n            .upsert({\r\n                title: articleData.title,\r\n                slug: slug,\r\n                content: articleData.content,\r\n                content_html: contentHtml,\r\n                id: articleData.id, // Ensure we map ID if schema allows, or let it auto-gen/match by slug\r\n                // Note: If blog_articles schema has different ID, remove this line.\r\n                // Assuming upsert on 'slug' handles it.\r\n                category: articleData.category || 'Uncategorized',\r\n                is_published: true,\r\n                published_date: new Date().toISOString(),\r\n                updated_date: new Date().toISOString()\r\n            }, { onConflict: 'slug' });\r\n\r\n        if (syncError) {\r\n            console.error('Sync error:', syncError);\r\n            throw new Error('Sync to public blog failed: ' + syncError.message);\r\n        }\r\n\r\n        // 4. Trigger GitHub Actions Website Rebuild (Automated Deployment)\r\n        const githubToken = process.env.GITHUB_PAT;\r\n        const repoOwner = process.env.GITHUB_REPO_OWNER || 'gsdminers-spec';\r\n        const repoName = process.env.GITHUB_REPO_NAME || 'asicrepair.test1';\r\n        const workflowFile = 'deploy.yml';\r\n\r\n        if (githubToken) {\r\n            try {\r\n                // We don't await this to keep the UI snappy - fire and forget (or await if you want confirmation)\r\n                // Better to await to catch errors, but keep it inside this try/catch block so DB success isn't blocked.\r\n                const deployResponse = await fetch(`https://api.github.com/repos/${repoOwner}/${repoName}/actions/workflows/${workflowFile}/dispatches`, {\r\n                    method: 'POST',\r\n                    headers: {\r\n                        'Accept': 'application/vnd.github.v3+json',\r\n                        'Authorization': `Bearer ${githubToken}`,\r\n                        'Content-Type': 'application/json',\r\n                    },\r\n                    body: JSON.stringify({\r\n                        ref: 'main', // The branch to deploy\r\n                    }),\r\n                });\r\n\r\n                if (deployResponse.ok) {\r\n                    console.log(`üöÄ Deployment triggered successfully for ${repoOwner}/${repoName}`);\r\n                } else {\r\n                    const errorText = await deployResponse.text();\r\n                    console.error(`‚ö†Ô∏è Failed to trigger deployment: ${deployResponse.status} ${errorText}`);\r\n                }\r\n            } catch (deployError) {\r\n                console.error('‚ö†Ô∏è Deployment trigger exception:', deployError);\r\n            }\r\n        } else {\r\n            console.log('‚ÑπÔ∏è GITHUB_PAT not found. Skipping automated deployment trigger.');\r\n        }\r\n\r\n        return NextResponse.json({ success: true, slug });\r\n\r\n    } catch (error: any) {\r\n        console.error('Publish API Error:', error);\r\n        return NextResponse.json({ success: false, error: error.message }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\api\\research\\route.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'mimoResearch' is defined but never used.","line":3,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":3,"endColumn":22,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"mimoResearch"},"fix":{"range":[116,167],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'outline' is assigned a value but never used.","line":12,"column":49,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":56},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'verification' is assigned a value but never used.","line":12,"column":58,"nodeType":"Identifier","messageId":"unusedVar","endLine":12,"endColumn":70},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":101,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":101,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4537,4540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4537,4540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { NextResponse } from 'next/server';\r\nimport { searchTavily, searchSerper } from '@/lib/researchProviders';\r\nimport { mimoResearch } from '@/lib/ai/researcher';\r\nimport { runCommittee } from '@/lib/ai/committee';\r\n\r\n// Allow long running processes (up to 5 mins)\r\nexport const maxDuration = 300;\r\n\r\nexport async function POST(req: Request) {\r\n    try {\r\n        const body = await req.json();\r\n        const { action, topic, researchContext, outline, verification } = body;\r\n\r\n        // --- STEP 1: RESEARCH (The Lab) ---\r\n        if (action === 'research') {\r\n            if (!topic) return NextResponse.json({ error: \"Topic is required\" }, { status: 400 });\r\n\r\n            console.log(`üî¨ [Research] Starting Deep Dive for: ${topic}`);\r\n\r\n            // 1. Parallel Search (Tri-Engine)\r\n            const [tavilyGeneral, tavilyCommunity, serperGoogle] = await Promise.all([\r\n                searchTavily(topic, process.env.TAVILY_API_KEY!),\r\n                searchTavily(`${topic} site:reddit.com OR site:stackoverflow.com \"solved\"`, process.env.TAVILY_API_KEY!),\r\n                searchSerper(topic, process.env.SERPER_API_KEY!)\r\n            ]);\r\n\r\n            // 2. Synthesize & Filter Context (The \"Smart Feed\")\r\n            const allResults = [\r\n                ...tavilyGeneral.results,\r\n                ...tavilyCommunity.results,\r\n                ...serperGoogle.results\r\n            ];\r\n\r\n            // A. Quality Filter\r\n            const qualityResults = allResults.filter(r => {\r\n                const content = r.content || \"\";\r\n                // 1. Length Check (Skip thin content)\r\n                if (content.length < 150) return false;\r\n                // 2. Duplicate Check (Basic URL check - could be improved)\r\n                return true;\r\n            }).map(r => {\r\n                // B. Scoring/Boost (Simple Heuristic)\r\n                let qualityScore = 1;\r\n                const lowerUrl = r.url.toLowerCase();\r\n                if (lowerUrl.includes('reddit.com')) qualityScore += 2; // High signal for repairs\r\n                if (lowerUrl.includes('bitcointalk.org')) qualityScore += 3; // Gold mine for ASIC\r\n                if (lowerUrl.includes('stackoverflow.com')) qualityScore += 2;\r\n                if (lowerUrl.includes('zeusbtc')) qualityScore += 2; // Competitor/Source data\r\n\r\n                return { ...r, qualityScore };\r\n            }).sort((a, b) => b.qualityScore - a.qualityScore); // Sort by Quality\r\n\r\n            // C. Format to Markdown (The \"Feed\")\r\n            let rawData = \"## üß† HIGH-QUALITY RESEARCH DATA (Structured Feed)\\n\\n\";\r\n\r\n            // Limit to top 15 sources to avoid context overflow, even with 17B model\r\n            qualityResults.slice(0, 15).forEach((r, index) => {\r\n                rawData += `### [${index + 1}] ${r.title}\\n`;\r\n                rawData += `**Source**: ${r.url}\\n`;\r\n                rawData += `**relevance**: ${r.qualityScore > 1 ? 'üî• High Signal' : 'Standard'}\\n`;\r\n                rawData += `> ${r.content.replace(/\\n/g, ' ')}\\n\\n`;\r\n            });\r\n\r\n            console.log(`‚úÖ Smart Feed Generated: ${qualityResults.length} filtered sources.`);\r\n\r\n            // 3. Mimo Analysis Bypass (Quota Pivot)\r\n            console.log(\"‚ö†Ô∏è Research Agent Bypass: Proceeding with Smart Feed (Raw Data Strategy).\");\r\n\r\n            return NextResponse.json({\r\n                success: true,\r\n                data: {\r\n                    rawSources: allResults, // Keep full list for UI\r\n                    // The \"Fact Sheet\" is now the structured raw feed\r\n                    factSheet: rawData,\r\n                    reasoning: \"AI Summary Bypassed. Using Structured Raw Feed (Quality Filtered) for maximum detail.\"\r\n                }\r\n            });\r\n        }\r\n\r\n        // --- STEP 2: DRAFT (The Studio) ---\r\n        if (action === 'draft') {\r\n            if (!topic || !researchContext) return NextResponse.json({ error: \"Topic and Context required\" }, { status: 400 });\r\n\r\n            console.log(`‚úçÔ∏è [Draft] Starting Committee for: ${topic}`);\r\n\r\n            // Execute the Writer Committee\r\n            const result = await runCommittee(topic, researchContext);\r\n\r\n            if (result.error) {\r\n                return NextResponse.json({ success: false, error: result.error });\r\n            }\r\n\r\n            return NextResponse.json({\r\n                success: true,\r\n                data: result\r\n            });\r\n        }\r\n\r\n        return NextResponse.json({ error: \"Invalid action\" }, { status: 400 });\r\n\r\n    } catch (e: any) {\r\n        console.error(\"API Error:\", e);\r\n        return NextResponse.json({ error: e.message || \"Internal Server Error\" }, { status: 500 });\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\api\\scraper\\search\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\api\\seo\\analyze\\route.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ArticleGenerator.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ArticlePreview.tsx","messages":[{"ruleId":"react-hooks/purity","severity":2,"message":"Error: Cannot call impure function during render\n\n`Date.now` is an impure function. Calling an impure function can produce unstable results that update unpredictably when the component happens to re-render. (https://react.dev/reference/rules/components-and-hooks-must-be-pure#components-and-hooks-must-be-idempotent).\n\nC:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ArticlePreview.tsx:109:71\n  107 |                             <div className=\"flex items-center gap-2\">\n  108 |                                 <Calendar className=\"w-4 h-4\" />\n> 109 |                                 <span>{new Date(article.created_at || Date.now()).toLocaleDateString('en-US', {\n      |                                                                       ^^^^^^^^^^ Cannot call impure function\n  110 |                                     year: 'numeric',\n  111 |                                     month: 'long',\n  112 |                                     day: 'numeric'","line":109,"column":71,"nodeType":null,"endLine":109,"endColumn":81}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { Article } from '@/lib/supabase';\r\nimport { marked } from 'marked';\r\nimport { useMemo } from 'react';\r\nimport { Calendar, Clock, ArrowLeft } from 'lucide-react';\r\n// import { Button } from '@/components/ui/button'; // Using native button with classes instead\r\n\r\n// Helper to estimate reading time\r\nfunction getReadingTime(text: string) {\r\n    const wpm = 200;\r\n    const words = text.trim().split(/\\s+/).length;\r\n    return Math.ceil(words / wpm);\r\n}\r\n\r\nexport interface ArticlePreviewProps {\r\n    article: Article;\r\n    onClose: () => void;\r\n    onPublish: (article: Article) => void;\r\n    onUnpublish: (article: Article) => void;\r\n    onDelete: (article: Article) => void;\r\n    onCopy: (content: string) => void;\r\n    onEdit: (article: Article) => void;\r\n}\r\n\r\nexport default function ArticlePreview({ article, onClose, onPublish, onUnpublish, onDelete, onCopy, onEdit }: ArticlePreviewProps) {\r\n    const htmlContent = useMemo(() => {\r\n        return marked.parse(article.content) as string;\r\n    }, [article.content]);\r\n\r\n    const readingTime = getReadingTime(article.content);\r\n\r\n    return (\r\n        <div\r\n            className=\"h-full flex flex-col overflow-y-auto custom-scrollbar selection:bg-cyan-500/30 selection:text-cyan-200 bg-[#0a0a0a] bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]\"\r\n        >\r\n            {/* Toolbar / Header within Preview */}\r\n            <div className=\"sticky top-0 z-10 bg-[#0a0a0a]/95 backdrop-blur-md border-b border-[#30363D] p-4 flex justify-between items-center shadow-md\">\r\n                <button\r\n                    onClick={onClose}\r\n                    className=\"flex items-center gap-2 text-gray-400 hover:text-white transition-colors text-sm font-medium\"\r\n                >\r\n                    <ArrowLeft className=\"w-4 h-4\" />\r\n                    Back to Editor\r\n                </button>\r\n\r\n                {/* ADMIN ACTIONS TOOLBAR */}\r\n                <div className=\"flex items-center gap-2\">\r\n                    <button\r\n                        onClick={() => onCopy(article.content)}\r\n                        className=\"px-3 py-1.5 text-xs font-medium text-gray-300 hover:text-white bg-white/5 hover:bg-white/10 rounded-md border border-white/10 transition-all\"\r\n                    >\r\n                        üìã Copy\r\n                    </button>\r\n\r\n                    <button\r\n                        onClick={() => onEdit(article)}\r\n                        className=\"px-3 py-1.5 text-xs font-medium text-blue-400 border border-blue-400/30 hover:bg-blue-400/10 rounded-md transition-all\"\r\n                    >\r\n                        ‚úèÔ∏è Edit\r\n                    </button>\r\n\r\n                    {article.status !== 'scheduled' && article.status !== 'published' && (\r\n                        <button\r\n                            onClick={() => onPublish(article)}\r\n                            className=\"px-3 py-1.5 text-xs font-medium text-black bg-[#F7931A] hover:bg-[#F7931A]/90 rounded-md transition-all shadow-[0_0_10px_rgba(247,147,26,0.2)]\"\r\n                        >\r\n                            üöÄ Publish\r\n                        </button>\r\n                    )}\r\n\r\n                    {article.status === 'published' && (\r\n                        <button\r\n                            onClick={() => onUnpublish(article)}\r\n                            className=\"px-3 py-1.5 text-xs font-medium text-orange-400 border border-orange-400/30 hover:bg-orange-400/10 rounded-md transition-all\"\r\n                        >\r\n                            üîô Unpublish\r\n                        </button>\r\n                    )}\r\n\r\n                    <button\r\n                        onClick={() => onDelete(article)}\r\n                        className=\"px-3 py-1.5 text-xs font-medium text-red-500 border border-red-500/30 hover:bg-red-500/10 rounded-md transition-all ml-2\"\r\n                    >\r\n                        üóëÔ∏è Delete\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"p-8 md:p-12 max-w-7xl mx-auto w-full\">\r\n                <article className=\"bg-[#0a0a0a] rounded-xl border border-[#30363D] overflow-hidden shadow-2xl\">\r\n                    <div className=\"p-8 md:p-12 lg:p-16\">\r\n                        {/* Category Badge */}\r\n                        <div className=\"flex items-center gap-3 mb-6\">\r\n                            <span className=\"px-3 py-1 text-xs font-bold tracking-wider uppercase rounded-full bg-[#F7931A]/10 text-[#F7931A]\">\r\n                                {article.category || 'Uncategorized'}\r\n                            </span>\r\n                        </div>\r\n\r\n                        {/* Title */}\r\n                        <h1 className=\"text-3xl md:text-5xl font-extrabold text-white mb-6 leading-tight tracking-tight\">\r\n                            {article.title}\r\n                        </h1>\r\n\r\n                        {/* Metadata */}\r\n                        <div className=\"flex flex-wrap items-center gap-6 mb-8 text-gray-400 text-sm font-medium\">\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Calendar className=\"w-4 h-4\" />\r\n                                <span>{new Date(article.created_at || Date.now()).toLocaleDateString('en-US', {\r\n                                    year: 'numeric',\r\n                                    month: 'long',\r\n                                    day: 'numeric'\r\n                                })}</span>\r\n                            </div>\r\n                            <div className=\"flex items-center gap-2\">\r\n                                <Clock className=\"w-4 h-4\" />\r\n                                <span>{readingTime} min read</span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* Divider */}\r\n                        <div className=\"w-full h-px bg-[#30363D] mb-10\"></div>\r\n\r\n                        {/* Article Content - THE HOLY GRAIL STYLES */}\r\n                        <div\r\n                            className=\"prose prose-invert md:prose-xl max-w-none\r\n                                prose-headings:text-white prose-headings:font-bold prose-headings:tracking-tight\r\n                                prose-h2:text-2xl md:prose-h2:text-3xl prose-h2:mt-12 prose-h2:mb-6 prose-h2:pb-4 prose-h2:border-b prose-h2:border-[#30363D]\r\n                                prose-h3:text-xl md:prose-h3:text-2xl prose-h3:mt-8 prose-h3:mb-4\r\n                                prose-p:text-gray-300 prose-p:leading-8 prose-p:mb-6 prose-p:text-lg\r\n                                prose-a:text-[#F7931A] prose-a:no-underline hover:prose-a:underline\r\n                                prose-strong:text-white prose-strong:font-bold\r\n                                prose-ul:text-gray-300 prose-ul:my-6 prose-ul:list-disc prose-ul:pl-6\r\n                                prose-ol:text-gray-300 prose-ol:my-6 prose-ol:list-decimal prose-ol:pl-6\r\n                                prose-li:my-2 prose-li:text-lg\r\n                                prose-code:text-[#F7931A] prose-code:bg-[#161B22] prose-code:px-2 prose-code:py-0.5 prose-code:rounded-md prose-code:text-sm prose-code:font-mono prose-code:border prose-code:border-[#30363D]\r\n                                prose-pre:bg-[#161B22] prose-pre:border prose-pre:border-[#30363D] prose-pre:p-4 prose-pre:rounded-lg\"\r\n                            dangerouslySetInnerHTML={{ __html: htmlContent }}\r\n                        />\r\n\r\n                        {/* CTA Footer Simulation */}\r\n                        <div className=\"mt-12 p-6 bg-[#0E1116] rounded-lg border border-[#30363D]\">\r\n                            <h3 className=\"text-xl font-bold text-white mb-3\">\r\n                                Need Professional ASIC Repair Services?\r\n                            </h3>\r\n                            <p className=\"text-gray-400 mb-4\">\r\n                                ASICREPAIR.in provides expert repair and maintenance services...\r\n                            </p>\r\n                            <button className=\"btn btn-primary bg-[#F7931A] hover:bg-[#F7931A]/90 text-white px-4 py-2 rounded font-medium disabled:opacity-50 disabled:cursor-not-allowed\">\r\n                                Contact Us\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </article>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ArticlesManager.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'Skeleton' is defined but never used.","line":8,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":8,"endColumn":18,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"Skeleton"},"fix":{"range":[287,296],"text":""},"desc":"Remove unused variable \"Skeleton\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getISTTimeString' is assigned a value but never used.","line":19,"column":7,"nodeType":"Identifier","messageId":"unusedVar","endLine":19,"endColumn":23},{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`loadArticles` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ArticlesManager.tsx:41:9\n  39 |\n  40 |     useEffect(() => {\n> 41 |         loadArticles();\n     |         ^^^^^^^^^^^^ `loadArticles` accessed before it is declared\n  42 |     }, []);\n  43 |\n  44 |     const loadArticles = async () => {\n\nC:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ArticlesManager.tsx:44:5\n  42 |     }, []);\n  43 |\n> 44 |     const loadArticles = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 45 |         setLoading(true);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |         const data = await fetchArticles(); // Re-import maybe needed but it is same file\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 47 |         setArticles(data);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 48 |         setLoading(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 49 |     };\n     | ^^^^^^^ `loadArticles` is declared here\n  50 |\n  51 |     const handleCopy = (content: string) => {\n  52 |         navigator.clipboard.writeText(content);","line":41,"column":9,"nodeType":null,"endLine":41,"endColumn":21},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'handlePrint' is assigned a value but never used.","line":105,"column":11,"nodeType":"Identifier","messageId":"unusedVar","endLine":105,"endColumn":22}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { fetchArticles, moveToPublish, unpublishArticle, deleteArticle, updateArticle } from '@/lib/articleActions';\r\nimport { publishNow } from '@/lib/publishActions';\r\nimport { Article } from '@/lib/supabase';\r\nimport { Skeleton, TableRowSkeleton } from './ui/Skeleton';\r\nimport ArticlePreview from './ArticlePreview';\r\n\r\n// IST Timezone Helpers (GMT+5:30)\r\nconst getISTDateString = () => {\r\n    const now = new Date();\r\n    // Get UTC time and add IST offset\r\n    const istTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }));\r\n    return istTime.toISOString().split('T')[0];\r\n};\r\n\r\nconst getISTTimeString = () => {\r\n    const now = new Date();\r\n    const istTime = new Date(now.toLocaleString('en-US', { timeZone: 'Asia/Kolkata' }));\r\n    return istTime.toTimeString().slice(0, 5);\r\n};\r\n\r\nexport default function ArticlesManager({ onNavigateToPublish }: { onNavigateToPublish: () => void }) {\r\n    const [articles, setArticles] = useState<Article[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [viewingArticle, setViewingArticle] = useState<Article | null>(null);\r\n\r\n    // Scheduling Modal State\r\n    const [schedulingArticle, setSchedulingArticle] = useState<Article | null>(null);\r\n    const [scheduleDate, setScheduleDate] = useState('');\r\n    const [scheduleTime, setScheduleTime] = useState('09:00');\r\n\r\n    // Editing State\r\n    const [editingArticle, setEditingArticle] = useState<Article | null>(null);\r\n    const [editTitle, setEditTitle] = useState('');\r\n    const [editContent, setEditContent] = useState('');\r\n\r\n    useEffect(() => {\r\n        loadArticles();\r\n    }, []);\r\n\r\n    const loadArticles = async () => {\r\n        setLoading(true);\r\n        const data = await fetchArticles(); // Re-import maybe needed but it is same file\r\n        setArticles(data);\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleCopy = (content: string) => {\r\n        navigator.clipboard.writeText(content);\r\n        alert('Article content copied to clipboard!');\r\n    };\r\n\r\n    // Open scheduling modal instead of direct publish\r\n    const handlePublishClick = (article: Article) => {\r\n        setSchedulingArticle(article);\r\n        setScheduleDate(getISTDateString());\r\n        setScheduleTime('09:00');\r\n    };\r\n\r\n    // Schedule for later\r\n    const handleScheduleConfirm = async () => {\r\n        if (!schedulingArticle) return;\r\n\r\n        const result = await moveToPublish(schedulingArticle.id, scheduleDate, scheduleTime);\r\n        if (result.success) {\r\n            alert(`${schedulingArticle.title} scheduled for ${scheduleDate} at ${scheduleTime} IST!`);\r\n            setSchedulingArticle(null);\r\n            loadArticles();\r\n            onNavigateToPublish();\r\n        } else {\r\n            alert(result.error || 'Failed to schedule');\r\n        }\r\n    };\r\n\r\n    // Publish immediately (no scheduling)\r\n    const handlePublishNowFromModal = async () => {\r\n        if (!schedulingArticle) return;\r\n\r\n        // First move to queue, then publish immediately\r\n        const moveResult = await moveToPublish(schedulingArticle.id);\r\n        if (!moveResult.success || !moveResult.queueId) {\r\n            alert(moveResult.error || 'Failed to move to publish queue');\r\n            return;\r\n        }\r\n\r\n        // Immediately publish using the new queueId\r\n        const publishResult = await publishNow(moveResult.queueId, schedulingArticle.id);\r\n\r\n        if (publishResult.success) {\r\n            alert(`${schedulingArticle.title} has been successfully PUBLISHED! üöÄ`);\r\n            setSchedulingArticle(null);\r\n            loadArticles();\r\n            onNavigateToPublish();\r\n        } else {\r\n            alert(`Moved to queue, but immediate publish failed: ${publishResult.error}`);\r\n        }\r\n        setSchedulingArticle(null);\r\n        loadArticles();\r\n        onNavigateToPublish();\r\n    };\r\n\r\n    const handlePrint = () => {\r\n        window.print();\r\n    };\r\n\r\n    // Unpublish - remove from public blog but keep in admin\r\n    const handleUnpublish = async (article: Article) => {\r\n        if (!confirm(`Unpublish \"${article.title}\"? This will remove it from the public blog.`)) return;\r\n\r\n        const result = await unpublishArticle(article.id);\r\n        if (result.success) {\r\n            alert(`${article.title} has been unpublished!`);\r\n            setViewingArticle(null);\r\n            loadArticles();\r\n        } else {\r\n            alert(result.error || 'Failed to unpublish');\r\n        }\r\n    };\r\n\r\n    // Delete - remove completely from everywhere\r\n    const handleDelete = async (article: Article) => {\r\n        if (!confirm(`DELETE \"${article.title}\"? This will permanently remove it from admin AND the public blog.`)) return;\r\n        if (!confirm('Are you SURE? This cannot be undone!')) return;\r\n\r\n        const result = await deleteArticle(article.id);\r\n        if (result.success) {\r\n            alert(`${article.title} has been deleted!`);\r\n            setViewingArticle(null);\r\n            loadArticles();\r\n        } else {\r\n            alert(result.error || 'Failed to delete');\r\n        }\r\n    };\r\n\r\n    // Edit Handlers\r\n    const handleEditClick = (article: Article) => {\r\n        setEditingArticle(article);\r\n        setEditTitle(article.title);\r\n        setEditContent(article.content);\r\n        // If we are in preview mode, we might want to keep viewing it or close it?\r\n        // Let's keep viewing it, but the modal will overlay.\r\n    };\r\n\r\n    const handleSaveEdit = async () => {\r\n        if (!editingArticle) return;\r\n\r\n        const result = await updateArticle(editingArticle.id, editTitle, editContent);\r\n\r\n        if (result.success) {\r\n            alert('Article updated successfully!');\r\n\r\n            // Update local state to reflect changes immediately\r\n            setArticles(articles.map(a =>\r\n                a.id === editingArticle.id\r\n                    ? { ...a, title: editTitle, content: editContent }\r\n                    : a\r\n            ));\r\n\r\n            // If viewing this article, update it too\r\n            if (viewingArticle?.id === editingArticle.id) {\r\n                setViewingArticle({ ...viewingArticle, title: editTitle, content: editContent });\r\n            }\r\n\r\n            setEditingArticle(null);\r\n        } else {\r\n            alert(result.error || 'Failed to update article');\r\n        }\r\n    };\r\n\r\n    const formatDate = (dateStr?: string) => {\r\n        if (!dateStr) return 'N/A';\r\n        return new Date(dateStr).toLocaleDateString();\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"card p-0 overflow-hidden\">\r\n                <div className=\"bg-slate-50 border-b border-slate-200 p-4 font-semibold text-slate-600\">Loading Articles...</div>\r\n                <TableRowSkeleton />\r\n                <TableRowSkeleton />\r\n                <TableRowSkeleton />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col h-full gap-6\">\r\n\r\n            {viewingArticle ? (\r\n                // PREVIEW MODE (Full Screen Overlay Style)\r\n                <div className=\"fixed inset-0 z-50 bg-[#0E1116] flex flex-col\">\r\n                    <ArticlePreview\r\n                        article={viewingArticle}\r\n                        onClose={() => setViewingArticle(null)}\r\n                        onPublish={handlePublishClick}\r\n                        onUnpublish={handleUnpublish}\r\n                        onDelete={handleDelete}\r\n                        onCopy={handleCopy}\r\n                        onEdit={handleEditClick}\r\n                    />\r\n                </div>\r\n            ) : (\r\n                // ARTICLE LIST VIEW\r\n                <div className=\"card p-0 overflow-hidden\">\r\n                    {articles.length === 0 ? (\r\n                        <div className=\"p-8 text-center text-slate-500\">\r\n                            No articles yet. Save articles from Final Output to see them here.\r\n                        </div>\r\n                    ) : (\r\n                        <>\r\n                            {/* Mobile Card View */}\r\n                            <div className=\"md:hidden flex flex-col divide-y divide-slate-100\">\r\n                                {articles.map((article, index) => (\r\n                                    <div key={article.id} className=\"p-4 hover:bg-slate-50 active:bg-slate-100\">\r\n                                        <div className=\"flex items-start justify-between gap-2 mb-2\">\r\n                                            <div className=\"flex-1 min-w-0\">\r\n                                                <span className=\"text-xs text-slate-400 mr-2\">#{index + 1}</span>\r\n                                                <h4 className=\"font-medium text-slate-800 text-sm line-clamp-2\">{article.title}</h4>\r\n                                            </div>\r\n                                            <div className=\"flex-shrink-0\">\r\n                                                {article.status === 'published' && <span className=\"badge badge-green text-xs\">Published</span>}\r\n                                                {article.status === 'scheduled' && <span className=\"badge badge-blue text-xs\">Scheduled</span>}\r\n                                                {article.status === 'ready' && <span className=\"badge badge-gray text-xs\">Ready</span>}\r\n                                                {article.status === 'draft' && <span className=\"badge badge-gray text-xs\">Draft</span>}\r\n                                            </div>\r\n                                        </div>\r\n                                        <div className=\"flex items-center gap-2 text-xs text-slate-500 mb-3\">\r\n                                            <span className=\"badge badge-blue text-xs\">{article.category || 'Uncategorized'}</span>\r\n                                            <span>‚Ä¢</span>\r\n                                            <span>{formatDate(article.created_at)}</span>\r\n                                        </div>\r\n                                        <div className=\"flex gap-2\">\r\n                                            <button\r\n                                                className=\"btn btn-secondary text-xs py-1.5 px-3 flex-1\"\r\n                                                onClick={() => setViewingArticle(article)}\r\n                                            >\r\n                                                üëÅÔ∏è View\r\n                                            </button>\r\n                                            <button\r\n                                                className=\"btn btn-secondary text-xs py-1.5 px-3\"\r\n                                                onClick={() => handleCopy(article.content)}\r\n                                            >\r\n                                                üìã\r\n                                            </button>\r\n                                            {article.status !== 'scheduled' && article.status !== 'published' && (\r\n                                                <button\r\n                                                    className=\"btn btn-primary text-xs py-1.5 px-3 flex-1\"\r\n                                                    onClick={() => handlePublishClick(article)}\r\n                                                >\r\n                                                    üöÄ Publish\r\n                                                </button>\r\n                                            )}\r\n                                        </div>\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n\r\n                            {/* Desktop Table View */}\r\n                            <table className=\"hidden md:table w-full text-left text-sm\">\r\n                                <thead className=\"bg-slate-50 border-b border-slate-200\">\r\n                                    <tr>\r\n                                        <th className=\"p-4 font-semibold text-slate-600\">#</th>\r\n                                        <th className=\"p-4 font-semibold text-slate-600\">Title</th>\r\n                                        <th className=\"p-4 font-semibold text-slate-600\">Category</th>\r\n                                        <th className=\"p-4 font-semibold text-slate-600\">Status</th>\r\n                                        <th className=\"p-4 font-semibold text-slate-600\">Date</th>\r\n                                        <th className=\"p-4 font-semibold text-slate-600 text-right\">Actions</th>\r\n                                    </tr>\r\n                                </thead>\r\n                                <tbody className=\"divide-y divide-slate-100\">\r\n                                    {articles.map((article, index) => (\r\n                                        <tr key={article.id} className=\"hover:bg-slate-50 transition-colors\">\r\n                                            <td className=\"p-4 text-slate-400\">{index + 1}</td>\r\n                                            <td className=\"p-4 font-medium text-slate-800\">{article.title}</td>\r\n                                            <td className=\"p-4 text-slate-500\">\r\n                                                <span className=\"badge badge-blue\">{article.category || 'Uncategorized'}</span>\r\n                                            </td>\r\n                                            <td className=\"p-4\">\r\n                                                {article.status === 'published' && <span className=\"badge badge-green\">Published</span>}\r\n                                                {article.status === 'scheduled' && <span className=\"badge badge-blue\">Scheduled</span>}\r\n                                                {article.status === 'ready' && <span className=\"badge badge-gray\">Ready</span>}\r\n                                                {article.status === 'draft' && <span className=\"badge badge-gray\">Draft</span>}\r\n                                            </td>\r\n                                            <td className=\"p-4 text-slate-500\">{formatDate(article.created_at)}</td>\r\n                                            <td className=\"p-4 text-right space-x-2\">\r\n                                                <button\r\n                                                    className=\"text-indigo-600 hover:text-indigo-800 font-medium\"\r\n                                                    onClick={() => setViewingArticle(article)}\r\n                                                    title=\"View Preview\"\r\n                                                >\r\n                                                    üëÅÔ∏è View\r\n                                                </button>\r\n                                                <button\r\n                                                    className=\"text-slate-400 hover:text-slate-600\"\r\n                                                    onClick={() => handleCopy(article.content)}\r\n                                                    title=\"Copy markdown\"\r\n                                                >\r\n                                                    üìã\r\n                                                </button>\r\n                                                {article.status !== 'scheduled' && article.status !== 'published' && (\r\n                                                    <button\r\n                                                        className=\"text-green-600 hover:text-green-800 font-medium ml-2\"\r\n                                                        onClick={() => handlePublishClick(article)}\r\n                                                        title=\"Move to Publish Hub\"\r\n                                                    >\r\n                                                        üöÄ Publish\r\n                                                    </button>\r\n                                                )}\r\n                                            </td>\r\n                                        </tr>\r\n                                    ))}\r\n                                </tbody>\r\n                            </table>\r\n                        </>\r\n                    )}\r\n                </div>\r\n            )}\r\n\r\n            {/* Schedule Modal */}\r\n            {schedulingArticle && (\r\n                <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-in fade-in\">\r\n                    <div className=\"bg-white rounded-xl shadow-2xl p-6 w-full max-w-md mx-4 animate-in zoom-in-95\">\r\n                        <h3 className=\"text-lg font-bold text-slate-800 mb-2\">üìÖ Schedule Publishing</h3>\r\n                        <p className=\"text-sm text-slate-500 mb-4 truncate\">\r\n                            {schedulingArticle.title}\r\n                        </p>\r\n\r\n                        <div className=\"bg-slate-50 p-4 rounded-lg mb-4\">\r\n                            <div className=\"grid grid-cols-2 gap-4 mb-4\">\r\n                                <div>\r\n                                    <label className=\"block text-xs font-semibold text-slate-600 mb-1\">\r\n                                        Date (IST)\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"date\"\r\n                                        className=\"form-input w-full\"\r\n                                        value={scheduleDate}\r\n                                        onChange={e => setScheduleDate(e.target.value)}\r\n                                        min={getISTDateString()}\r\n                                    />\r\n                                </div>\r\n                                <div>\r\n                                    <label className=\"block text-xs font-semibold text-slate-600 mb-1\">\r\n                                        Time (IST)\r\n                                    </label>\r\n                                    <input\r\n                                        type=\"time\"\r\n                                        className=\"form-input w-full\"\r\n                                        value={scheduleTime}\r\n                                        onChange={e => setScheduleTime(e.target.value)}\r\n                                    />\r\n                                </div>\r\n                            </div>\r\n                            <p className=\"text-xs text-slate-400 text-center\">\r\n                                All times are in Indian Standard Time (GMT+5:30)\r\n                            </p>\r\n                        </div>\r\n\r\n                        <div className=\"flex gap-3\">\r\n                            <button\r\n                                className=\"btn btn-secondary flex-1\"\r\n                                onClick={() => setSchedulingArticle(null)}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                className=\"btn btn-primary flex-1\"\r\n                                onClick={handleScheduleConfirm}\r\n                            >\r\n                                ‚è∞ Schedule\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"mt-3 pt-3 border-t border-slate-100\">\r\n                            <button\r\n                                className=\"btn btn-secondary w-full text-green-700 border-green-200 hover:bg-green-50\"\r\n                                onClick={handlePublishNowFromModal}\r\n                            >\r\n                                üöÄ Publish Now Instead\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n            {/* Edit Modal */}\r\n            {editingArticle && (\r\n                <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] animate-in fade-in\">\r\n                    <div className=\"bg-white rounded-xl shadow-2xl flex flex-col w-full max-w-4xl max-h-[90vh] mx-4 animate-in zoom-in-95\">\r\n                        <div className=\"p-4 border-b border-slate-200 flex justify-between items-center bg-slate-50 rounded-t-xl\">\r\n                            <h3 className=\"text-lg font-bold text-slate-800\">‚úèÔ∏è Edit Article</h3>\r\n                            <button onClick={() => setEditingArticle(null)} className=\"text-slate-400 hover:text-slate-600\">\r\n                                ‚úï\r\n                            </button>\r\n                        </div>\r\n\r\n                        <div className=\"p-6 flex-1 overflow-y-auto\">\r\n                            <div className=\"mb-4\">\r\n                                <label className=\"block text-sm font-semibold text-slate-700 mb-2\">Title</label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    className=\"form-input w-full text-lg font-medium\"\r\n                                    value={editTitle}\r\n                                    onChange={e => setEditTitle(e.target.value)}\r\n                                />\r\n                            </div>\r\n\r\n                            <div className=\"h-full min-h-[400px]\">\r\n                                <label className=\"block text-sm font-semibold text-slate-700 mb-2\">Content (Markdown)</label>\r\n                                <textarea\r\n                                    className=\"form-input w-full h-[400px] font-mono text-sm leading-relaxed\"\r\n                                    value={editContent}\r\n                                    onChange={e => setEditContent(e.target.value)}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"p-4 border-t border-slate-200 bg-slate-50 rounded-b-xl flex justify-end gap-3\">\r\n                            <button\r\n                                className=\"btn btn-secondary\"\r\n                                onClick={() => setEditingArticle(null)}\r\n                            >\r\n                                Cancel\r\n                            </button>\r\n                            <button\r\n                                className=\"btn btn-primary min-w-[100px]\"\r\n                                onClick={handleSaveEdit}\r\n                            >\r\n                                üíæ Save Changes\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\BlogTree.tsx","messages":[],"suppressedMessages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has missing dependencies: 'selectedCategory', 'selectedPhase', and 'selectedSubcategory'. Either include them or remove the dependency array.","line":72,"column":8,"nodeType":"ArrayExpression","endLine":72,"endColumn":14,"suggestions":[{"desc":"Update the dependencies array to be: [data, selectedCategory, selectedPhase, selectedSubcategory]","fix":{"range":[2771,2777],"text":"[data, selectedCategory, selectedPhase, selectedSubcategory]"}}],"suppressions":[{"kind":"directive","justification":""}]}],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ClaudeOutput.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`loadTopics` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ClaudeOutput.tsx:42:9\n  40 |     // Fetch pending topics on mount\n  41 |     useEffect(() => {\n> 42 |         loadTopics();\n     |         ^^^^^^^^^^ `loadTopics` accessed before it is declared\n  43 |     }, []);\n  44 |\n  45 |     const loadTopics = async () => {\n\nC:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ClaudeOutput.tsx:45:5\n  43 |     }, []);\n  44 |\n> 45 |     const loadTopics = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 46 |         setStatus('loading');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 47 |         const data = await fetchRecentTopics();\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 48 |         setTopics(data);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 49 |         setStatus('idle');\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 50 |     };\n     | ^^^^^^^ `loadTopics` is declared here\n  51 |\n  52 |     const handleTopicChange = (topicId: string) => {\n  53 |         setSelectedTopicId(topicId);","line":42,"column":9,"nodeType":null,"endLine":42,"endColumn":19}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n'use client';\r\n\r\nimport { useState, useEffect, useRef } from 'react';\r\nimport { fetchRecentTopics, saveArticle, uploadImage } from '@/lib/articleActions';\r\nimport { Topic } from '@/lib/supabase';\r\nimport { Skeleton } from './ui/Skeleton';\r\n\r\nexport default function ClaudeOutput() {\r\n    const [topics, setTopics] = useState<Topic[]>([]);\r\n    const [selectedTopicId, setSelectedTopicId] = useState('');\r\n    const [selectedTopicTitle, setSelectedTopicTitle] = useState('');\r\n    const [content, setContent] = useState('');\r\n    const [status, setStatus] = useState<'idle' | 'loading' | 'saving' | 'saved' | 'error'>('idle');\r\n    const [errorMessage, setErrorMessage] = useState('');\r\n    const [lastSaved, setLastSaved] = useState<Date | null>(null);\r\n\r\n    const textareaRef = useRef<HTMLTextAreaElement>(null);\r\n\r\n    // Auto-save logic\r\n    useEffect(() => {\r\n        const timer = setTimeout(() => {\r\n            if (content && selectedTopicId && status !== 'saving' && status !== 'saved') {\r\n                localStorage.setItem(`draft-${selectedTopicId}`, content);\r\n                setLastSaved(new Date());\r\n            }\r\n        }, 3000);\r\n\r\n        return () => clearTimeout(timer);\r\n    }, [content, selectedTopicId, status]);\r\n\r\n    // Restore draft\r\n    useEffect(() => {\r\n        if (selectedTopicId) {\r\n            const draft = localStorage.getItem(`draft-${selectedTopicId}`);\r\n            if (draft) setContent(draft);\r\n        }\r\n    }, [selectedTopicId]);\r\n\r\n    // Fetch pending topics on mount\r\n    useEffect(() => {\r\n        loadTopics();\r\n    }, []);\r\n\r\n    const loadTopics = async () => {\r\n        setStatus('loading');\r\n        const data = await fetchRecentTopics();\r\n        setTopics(data);\r\n        setStatus('idle');\r\n    };\r\n\r\n    const handleTopicChange = (topicId: string) => {\r\n        setSelectedTopicId(topicId);\r\n        const topic = topics.find(t => t.id === topicId);\r\n        setSelectedTopicTitle(topic?.title || '');\r\n        setContent('');\r\n    };\r\n\r\n    const handleSave = async () => {\r\n        if (!selectedTopicId || !content) return;\r\n        setStatus('saving');\r\n        setErrorMessage('');\r\n\r\n        const result = await saveArticle(selectedTopicId, selectedTopicTitle, content);\r\n\r\n        if (result.success) {\r\n            setStatus('saved');\r\n            localStorage.removeItem(`draft-${selectedTopicId}`);\r\n            setTimeout(() => {\r\n                setStatus('idle');\r\n                setContent('');\r\n                setSelectedTopicId('');\r\n                setSelectedTopicTitle('');\r\n                loadTopics();\r\n            }, 2000);\r\n        } else {\r\n            setStatus('error');\r\n            setErrorMessage(result.error || 'Failed to save article');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col gap-6 h-full max-w-4xl mx-auto\">\r\n\r\n            {/* Introduction Card */}\r\n            <div className=\"bg-indigo-50 border border-indigo-100 rounded-lg p-4 flex items-start gap-3\">\r\n                <span className=\"text-2xl\">üìã</span>\r\n                <div>\r\n                    <h3 className=\"font-bold text-indigo-900 text-sm\">Step: Paste & Save Article</h3>\r\n                    <p className=\"text-sm text-indigo-700 mt-1\">\r\n                        After generating the article in Final Output, copy the Markdown content and paste it here.\r\n                        This will save the article to the database.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Step 1: Select Topic */}\r\n            <div className=\"card\">\r\n                <h3 className=\"card-title mb-4\">1. Select Topic Title</h3>\r\n                {status === 'loading' ? (\r\n                    <div className=\"space-y-2\">\r\n                        <Skeleton className=\"h-10 w-full\" />\r\n                    </div>\r\n                ) : topics.length === 0 ? (\r\n                    <div className=\"text-slate-500 text-sm\">No pending topics found. Add topics in Blog Tree first.</div>\r\n                ) : (\r\n                    <select\r\n                        className=\"form-select\"\r\n                        value={selectedTopicId}\r\n                        onChange={(e) => handleTopicChange(e.target.value)}\r\n                    >\r\n                        <option value=\"\">-- Choose a Topic --</option>\r\n\r\n                        <optgroup label=\"Pending / In Progress\">\r\n                            {topics.filter(t => ['pending', 'in-progress'].includes(t.status)).map(t => (\r\n                                <option key={t.id} value={t.id}>[{t.status.toUpperCase()}] {t.title}</option>\r\n                            ))}\r\n                        </optgroup>\r\n\r\n                        <optgroup label=\"Recent History\">\r\n                            {topics.filter(t => !['pending', 'in-progress'].includes(t.status)).map(t => (\r\n                                <option key={t.id} value={t.id}>[{t.status.toUpperCase()}] {t.title}</option>\r\n                            ))}\r\n                        </optgroup>\r\n                    </select>\r\n                )}\r\n            </div>\r\n\r\n            {/* Step 2: Paste Content */}\r\n            <div className=\"card flex-1 flex flex-col min-h-[400px]\">\r\n                <div className=\"flex justify-between items-center mb-4\">\r\n                    <h3 className=\"card-title\">2. Paste Final Article (Markdown)</h3>\r\n                    {lastSaved && <span className=\"text-xs text-slate-400\">Draft saved locally {lastSaved.toLocaleTimeString()}</span>}\r\n                </div>\r\n                <textarea\r\n                    ref={textareaRef}\r\n                    className=\"form-textarea flex-1 font-mono text-sm leading-relaxed\"\r\n                    placeholder=\"# Article Title\r\n                    \r\nContent goes here...\"\r\n                    value={content}\r\n                    onChange={(e) => setContent(e.target.value)}\r\n                />\r\n            </div>\r\n\r\n            {/* Error Message */}\r\n            {status === 'error' && (\r\n                <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded\">\r\n                    {errorMessage}\r\n                </div>\r\n            )}\r\n\r\n            {/* Step 3: Action */}\r\n            <div className=\"card sticky bottom-4 shadow-xl border-t-2 border-indigo-500\">\r\n                <div className=\"flex justify-between items-center\">\r\n                    <div className=\"text-sm text-gray-500\">\r\n                        {content.length > 0 ? `${content.split(' ').length} words detected` : 'Waiting for content...'}\r\n                    </div>\r\n\r\n                    <div className=\"flex gap-3\">\r\n                        {/* Image Upload Button */}\r\n                        <div className=\"relative\">\r\n                            <input\r\n                                type=\"file\"\r\n                                accept=\"image/*\"\r\n                                className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\r\n                                onChange={async (e) => {\r\n                                    const file = e.target.files?.[0];\r\n                                    if (!file) return;\r\n\r\n                                    if (file.size > 5 * 1024 * 1024) {\r\n                                        alert(\"File size too large. Max 5MB.\");\r\n                                        return;\r\n                                    }\r\n\r\n                                    // Save cursor position since upload is async\r\n                                    const startPos = textareaRef.current?.selectionStart || content.length;\r\n                                    const endPos = textareaRef.current?.selectionEnd || startPos;\r\n\r\n                                    setStatus('saving');\r\n                                    const { success, url, error } = await uploadImage(file);\r\n                                    setStatus('idle');\r\n\r\n                                    if (success && url) {\r\n                                        // Logical Insertion: Add newlines before and after to ensure block separation\r\n                                        const markdownImage = `\\n\\n![${file.name}](${url})\\n\\n`;\r\n\r\n                                        const newContent = content.substring(0, startPos) + markdownImage + content.substring(endPos);\r\n\r\n                                        setContent(newContent);\r\n\r\n                                        // Restore focus and cursor position\r\n                                        setTimeout(() => {\r\n                                            if (textareaRef.current) {\r\n                                                textareaRef.current.focus();\r\n                                                const newCursorPos = startPos + markdownImage.length;\r\n                                                textareaRef.current.setSelectionRange(newCursorPos, newCursorPos);\r\n                                            }\r\n                                        }, 0);\r\n\r\n                                    } else {\r\n                                        alert(`Upload Failed: ${error}`);\r\n                                    }\r\n                                }}\r\n                            />\r\n                            <button className=\"btn btn-secondary flex items-center gap-2\">\r\n                                <span>üì∑</span> Add Photos\r\n                            </button>\r\n                        </div>\r\n\r\n                        <button\r\n                            className={`btn ${status === 'saved' ? 'badge-green text-green-800' : 'btn-primary'} min-w-[200px]`}\r\n                            onClick={handleSave}\r\n                            disabled={!selectedTopicId || !content || status === 'saving'}\r\n                        >\r\n                            {status === 'saving' ? 'üíæ Saving...' : status === 'saved' ? '‚úÖ Saved Successfully!' : '‚úÖ Add to Articles'}\r\n                        </button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div >\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\KeywordTracker.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`loadKeywords` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\KeywordTracker.tsx:17:9\n  15 |\n  16 |     useEffect(() => {\n> 17 |         loadKeywords();\n     |         ^^^^^^^^^^^^ `loadKeywords` accessed before it is declared\n  18 |     }, []);\n  19 |\n  20 |     const loadKeywords = async () => {\n\nC:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\KeywordTracker.tsx:20:5\n  18 |     }, []);\n  19 |\n> 20 |     const loadKeywords = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 21 |         setLoading(true);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 22 |         const data = await fetchKeywords();\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 23 |         setKeywords(data);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 24 |         setLoading(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 25 |     };\n     | ^^^^^^^ `loadKeywords` is declared here\n  26 |\n  27 |     const handleAdd = async () => {\n  28 |         if (!newPhrase.trim()) {","line":17,"column":9,"nodeType":null,"endLine":17,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { fetchKeywords, addKeyword, updateKeywordStatus } from '@/lib/keywordActions';\r\nimport { Keyword } from '@/lib/supabase';\r\n\r\nexport default function KeywordTracker() {\r\n    const [keywords, setKeywords] = useState<Keyword[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [newPhrase, setNewPhrase] = useState('');\r\n    const [newModel, setNewModel] = useState('');\r\n    const [newCategory, setNewCategory] = useState('');\r\n    const [expandedId, setExpandedId] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        loadKeywords();\r\n    }, []);\r\n\r\n    const loadKeywords = async () => {\r\n        setLoading(true);\r\n        const data = await fetchKeywords();\r\n        setKeywords(data);\r\n        setLoading(false);\r\n    };\r\n\r\n    const handleAdd = async () => {\r\n        if (!newPhrase.trim()) {\r\n            alert('Please enter a keyword phrase.');\r\n            return;\r\n        }\r\n        const result = await addKeyword(newPhrase.trim(), newModel.trim() || undefined, newCategory.trim() || undefined);\r\n        if (result.success) {\r\n            setNewPhrase('');\r\n            setNewModel('');\r\n            setNewCategory('');\r\n            loadKeywords();\r\n        } else {\r\n            alert(result.error || 'Failed to add keyword');\r\n        }\r\n    };\r\n\r\n    const handleStatusUpdate = async (id: string, status: 'approved' | 'rejected') => {\r\n        const result = await updateKeywordStatus(id, status);\r\n        if (result.success) {\r\n            loadKeywords();\r\n        } else {\r\n            alert(result.error || 'Failed to update status');\r\n        }\r\n    };\r\n\r\n    const toggleExpand = (id: string) => {\r\n        setExpandedId(expandedId === id ? null : id);\r\n    };\r\n\r\n    const getStatusBadge = (status: string) => {\r\n        switch (status) {\r\n            case 'approved': return <span className=\"badge badge-green\">Approved</span>;\r\n            case 'rejected': return <span className=\"badge badge-gray\">Rejected</span>;\r\n            default: return <span className=\"badge badge-blue\">Pending</span>;\r\n        }\r\n    };\r\n\r\n    const getVolumeBadge = (volume: string) => {\r\n        switch (volume) {\r\n            case 'high': return <span className=\"text-green-600 font-semibold\">High</span>;\r\n            case 'low': return <span className=\"text-slate-400\">Low</span>;\r\n            default: return <span className=\"text-blue-600\">Medium</span>;\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"p-8 text-center text-slate-500\">‚è≥ Loading keywords...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"flex flex-col gap-6\">\r\n            {/* Add Keyword Card */}\r\n            <div className=\"card\">\r\n                <h3 className=\"card-title mb-4\">‚ûï Add New Keyword</h3>\r\n                <div className=\"grid md:grid-cols-4 gap-4\">\r\n                    <div className=\"md:col-span-2\">\r\n                        <label className=\"block text-sm font-medium mb-1\">Keyword Phrase *</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"form-input\"\r\n                            placeholder=\"e.g., s19 pro hashboard repair\"\r\n                            value={newPhrase}\r\n                            onChange={e => setNewPhrase(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Model</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"form-input\"\r\n                            placeholder=\"e.g., Antminer S19\"\r\n                            value={newModel}\r\n                            onChange={e => setNewModel(e.target.value)}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium mb-1\">Category</label>\r\n                        <input\r\n                            type=\"text\"\r\n                            className=\"form-input\"\r\n                            placeholder=\"e.g., Hashboard\"\r\n                            value={newCategory}\r\n                            onChange={e => setNewCategory(e.target.value)}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                <button className=\"btn btn-primary mt-4\" onClick={handleAdd}>\r\n                    Add Keyword\r\n                </button>\r\n            </div>\r\n\r\n            {/* Keywords List */}\r\n            <div className=\"card p-0 overflow-hidden\">\r\n                {keywords.length === 0 ? (\r\n                    <div className=\"p-8 text-center text-slate-500\">\r\n                        No keywords yet. Add your first keyword above.\r\n                    </div>\r\n                ) : (\r\n                    <table className=\"w-full text-left text-sm\">\r\n                        <thead className=\"bg-slate-50 border-b border-slate-200\">\r\n                            <tr>\r\n                                <th className=\"p-4 font-semibold text-slate-600\">Phrase</th>\r\n                                <th className=\"p-4 font-semibold text-slate-600\">Model</th>\r\n                                <th className=\"p-4 font-semibold text-slate-600\">Category</th>\r\n                                <th className=\"p-4 font-semibold text-slate-600\">Volume</th>\r\n                                <th className=\"p-4 font-semibold text-slate-600\">Status</th>\r\n                                <th className=\"p-4 font-semibold text-slate-600 text-right\">Actions</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody className=\"divide-y divide-slate-100\">\r\n                            {keywords.map(kw => (\r\n                                <>\r\n                                    <tr key={kw.id} className=\"hover:bg-slate-50 cursor-pointer\" onClick={() => toggleExpand(kw.id)}>\r\n                                        <td className=\"p-4 font-medium text-slate-800\">{kw.phrase}</td>\r\n                                        <td className=\"p-4 text-slate-500\">{kw.model || '-'}</td>\r\n                                        <td className=\"p-4 text-slate-500\">{kw.category || '-'}</td>\r\n                                        <td className=\"p-4\">{getVolumeBadge(kw.volume)}</td>\r\n                                        <td className=\"p-4\">{getStatusBadge(kw.status)}</td>\r\n                                        <td className=\"p-4 text-right space-x-2\" onClick={e => e.stopPropagation()}>\r\n                                            {kw.status === 'pending' && (\r\n                                                <>\r\n                                                    <button\r\n                                                        className=\"text-green-600 hover:text-green-800 font-medium\"\r\n                                                        onClick={() => handleStatusUpdate(kw.id, 'approved')}\r\n                                                    >\r\n                                                        ‚úÖ Approve\r\n                                                    </button>\r\n                                                    <button\r\n                                                        className=\"text-red-500 hover:text-red-700\"\r\n                                                        onClick={() => handleStatusUpdate(kw.id, 'rejected')}\r\n                                                    >\r\n                                                        ‚ùå Reject\r\n                                                    </button>\r\n                                                </>\r\n                                            )}\r\n                                        </td>\r\n                                    </tr>\r\n                                    {expandedId === kw.id && (\r\n                                        <tr className=\"bg-slate-50\">\r\n                                            <td colSpan={6} className=\"p-4\">\r\n                                                <div className=\"text-sm text-slate-600\">\r\n                                                    <strong>Notes:</strong> {kw.notes || 'No notes'}\r\n                                                </div>\r\n                                            </td>\r\n                                        </tr>\r\n                                    )}\r\n                                </>\r\n                            ))}\r\n                        </tbody>\r\n                    </table>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\PromptStudio.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\PublishHub.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`loadQueue` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\PublishHub.tsx:16:9\n  14 |\n  15 |     useEffect(() => {\n> 16 |         loadQueue();\n     |         ^^^^^^^^^ `loadQueue` accessed before it is declared\n  17 |     }, []);\n  18 |\n  19 |     const loadQueue = async () => {\n\nC:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\PublishHub.tsx:19:5\n  17 |     }, []);\n  18 |\n> 19 |     const loadQueue = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 20 |         setLoading(true);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 21 |         const data = await fetchPublishQueue();\n     ‚Ä¶\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 32 |         setLoading(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^\n> 33 |     };\n     | ^^^^^^^ `loadQueue` is declared here\n  34 |\n  35 |     const scheduledItems = queue.filter(q => q.status === 'scheduled');\n  36 |     const pendingItems = queue.filter(q => q.status !== 'scheduled' && q.status !== 'published');","line":16,"column":9,"nodeType":null,"endLine":16,"endColumn":18}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { fetchPublishQueue, updateSchedule, publishNow, cancelSchedule } from '@/lib/publishActions';\r\nimport { PublishItem, Article } from '@/lib/supabase';\r\n\r\ntype QueueItem = PublishItem & { articles: Article };\r\n\r\nexport default function PublishHub() {\r\n    const [queue, setQueue] = useState<QueueItem[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [dateInputs, setDateInputs] = useState<Record<string, { date: string, time: string, isScheduling?: boolean }>>({});\r\n\r\n    useEffect(() => {\r\n        loadQueue();\r\n    }, []);\r\n\r\n    const loadQueue = async () => {\r\n        setLoading(true);\r\n        const data = await fetchPublishQueue();\r\n        setQueue(data);\r\n        // Pre-fill existing dates\r\n        const inputs: Record<string, { date: string, time: string, isScheduling?: boolean }> = {};\r\n        data.forEach(item => {\r\n            inputs[item.id] = {\r\n                date: item.scheduled_date || '',\r\n                time: item.scheduled_time || ''\r\n            };\r\n        });\r\n        setDateInputs(inputs);\r\n        setLoading(false);\r\n    };\r\n\r\n    const scheduledItems = queue.filter(q => q.status === 'scheduled');\r\n    const pendingItems = queue.filter(q => q.status !== 'scheduled' && q.status !== 'published');\r\n\r\n    const handleUpdateInput = (id: string, field: 'date' | 'time', val: string) => {\r\n        setDateInputs(prev => ({\r\n            ...prev,\r\n            [id]: { ...prev[id], [field]: val }\r\n        }));\r\n    };\r\n\r\n    const handleSchedule = async (id: string) => {\r\n        const input = dateInputs[id];\r\n        if (!input?.date || !input?.time) {\r\n            alert('Please select both date and time.');\r\n            return;\r\n        }\r\n        const result = await updateSchedule(id, input.date, input.time);\r\n        if (result.success) {\r\n            loadQueue();\r\n        } else {\r\n            alert(result.error || 'Failed to schedule');\r\n        }\r\n    };\r\n\r\n    const handlePublishNow = async (item: QueueItem) => {\r\n        if (confirm('Publish this article immediately?')) {\r\n            const result = await publishNow(item.id, item.article_id);\r\n            if (result.success) {\r\n                alert('Article published successfully!');\r\n                loadQueue();\r\n            } else {\r\n                alert(result.error || 'Failed to publish');\r\n            }\r\n        }\r\n    };\r\n\r\n    const handleCancelSchedule = async (item: QueueItem) => {\r\n        const result = await cancelSchedule(item.id, item.article_id);\r\n        if (result.success) {\r\n            loadQueue();\r\n        } else {\r\n            alert(result.error || 'Failed to cancel');\r\n        }\r\n    };\r\n\r\n    if (loading) {\r\n        return <div className=\"p-8 text-center text-slate-500\">‚è≥ Loading publish queue...</div>;\r\n    }\r\n\r\n    return (\r\n        <div className=\"grid md:grid-cols-2 gap-6 h-full items-start\">\r\n\r\n            {/* Left Col: Ready to Publish */}\r\n            <div className=\"flex flex-col gap-4\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"font-bold text-slate-800 text-lg\">üì§ Ready to Schedule ({pendingItems.length})</h3>\r\n                </div>\r\n\r\n                {pendingItems.length === 0 && (\r\n                    <div className=\"p-8 text-center border-2 border-dashed border-slate-200 rounded-xl text-slate-400\">\r\n                        No articles ready. Move articles from the Articles page.\r\n                    </div>\r\n                )}\r\n\r\n                {pendingItems.map(item => {\r\n                    const isScheduling = dateInputs[item.id]?.isScheduling || false;\r\n\r\n                    return (\r\n                        <div key={item.id} className=\"card border-l-4 border-l-blue-500 shadow-sm hover:shadow-md transition-shadow\">\r\n                            <h4 className=\"font-bold text-slate-800 mb-1\">{item.articles?.title || 'Untitled'}</h4>\r\n                            <p className=\"text-xs text-slate-500 mb-4\">{item.articles?.category || 'Uncategorized'}</p>\r\n\r\n                            <div className=\"mb-3\">\r\n                                <label className=\"flex items-center gap-2 text-sm text-slate-600 cursor-pointer\">\r\n                                    <input\r\n                                        type=\"checkbox\"\r\n                                        className=\"form-checkbox h-4 w-4 text-blue-600 rounded\"\r\n                                        checked={isScheduling}\r\n                                        onChange={e => setDateInputs(prev => ({\r\n                                            ...prev,\r\n                                            [item.id]: { ...prev[item.id], isScheduling: e.target.checked }\r\n                                        }))}\r\n                                    />\r\n                                    <span>Schedule for later?</span>\r\n                                </label>\r\n                            </div>\r\n\r\n                            {isScheduling ? (\r\n                                <div className=\"bg-slate-50 p-3 rounded-md mb-3 grid grid-cols-2 gap-2 animate-in fade-in slide-in-from-top-2\">\r\n                                    <div>\r\n                                        <label className=\"text-xs font-semibold text-slate-500 block mb-1\">Date</label>\r\n                                        <input\r\n                                            type=\"date\"\r\n                                            className=\"form-input text-xs py-1 w-full\"\r\n                                            value={dateInputs[item.id]?.date || ''}\r\n                                            onChange={e => handleUpdateInput(item.id, 'date', e.target.value)}\r\n                                        />\r\n                                    </div>\r\n                                    <div>\r\n                                        <label className=\"text-xs font-semibold text-slate-500 block mb-1\">Time</label>\r\n                                        <input\r\n                                            type=\"time\"\r\n                                            className=\"form-input text-xs py-1 w-full\"\r\n                                            value={dateInputs[item.id]?.time || ''}\r\n                                            onChange={e => handleUpdateInput(item.id, 'time', e.target.value)}\r\n                                        />\r\n                                    </div>\r\n                                    <div className=\"col-span-2 flex justify-end mt-2\">\r\n                                        <button\r\n                                            className=\"btn btn-secondary text-xs w-full\"\r\n                                            onClick={() => handleSchedule(item.id)}\r\n                                        >\r\n                                            ‚è∞ Confirm Schedule\r\n                                        </button>\r\n                                    </div>\r\n                                </div>\r\n                            ) : (\r\n                                <div className=\"bg-emerald-50 p-3 rounded-md mb-3 border border-emerald-100 text-center\">\r\n                                    <p className=\"text-xs text-emerald-700 font-medium mb-2\">Ready to go live immediately</p>\r\n                                    <button\r\n                                        className=\"btn btn-primary text-xs w-full shadow-emerald-200 shadow-sm\"\r\n                                        onClick={() => handlePublishNow(item)}\r\n                                    >\r\n                                        üöÄ Publish Now\r\n                                    </button>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n                    );\r\n                })}\r\n            </div>\r\n\r\n            {/* Right Col: Scheduled Queue */}\r\n            <div className=\"flex flex-col gap-4 bg-slate-100 p-4 rounded-xl min-h-[500px]\">\r\n                <h3 className=\"font-bold text-slate-700 text-lg mb-2\">‚è≥ Scheduled Queue ({scheduledItems.length})</h3>\r\n\r\n                {scheduledItems.length === 0 && (\r\n                    <div className=\"text-center py-10 text-slate-400\">\r\n                        Queue is empty.\r\n                    </div>\r\n                )}\r\n\r\n                {scheduledItems.map(item => (\r\n                    <div key={item.id} className=\"bg-white p-4 rounded-lg shadow-sm border border-slate-200 flex justify-between items-center group\">\r\n                        <div>\r\n                            <h4 className=\"font-semibold text-slate-800 text-sm\">{item.articles?.title || 'Untitled'}</h4>\r\n                            <div className=\"flex items-center gap-2 mt-1\">\r\n                                <span className=\"badge badge-green text-[10px]\">SCHEDULED</span>\r\n                                <span className=\"text-xs text-slate-500\">\r\n                                    {item.scheduled_date} @ {item.scheduled_time}\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                        <button\r\n                            className=\"text-gray-300 hover:text-red-500 transition-colors px-2\"\r\n                            title=\"Cancel Schedule\"\r\n                            onClick={() => handleCancelSchedule(item)}\r\n                        >\r\n                            ‚úï\r\n                        </button>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ResearchViewer.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ResearchWorkspace.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'saveTopicResearch' is defined but never used.","line":7,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":27,"suggestions":[{"messageId":"removeUnusedVar","data":{"varName":"saveTopicResearch"},"fix":{"range":[167,185],"text":""},"desc":"Remove unused variable \"saveTopicResearch\"."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'getTopicResearch' is defined but never used.","line":7,"column":29,"nodeType":"Identifier","messageId":"unusedVar","endLine":7,"endColumn":45,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"getTopicResearch"},"fix":{"range":[158,234],"text":""},"desc":"Remove unused import declaration."}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\n'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport ResearchViewer from './ResearchViewer';\r\nimport { SearchResult } from '@/lib/types';\r\nimport { saveTopicResearch, getTopicResearch } from '@/lib/researchActions';\r\n\r\ninterface ResearchWorkspaceProps {\r\n    initialTopic?: string;\r\n    onNavigateToPrompt?: (data: { topic: string, results: SearchResult[], aiSummary: string }) => void;\r\n}\r\n\r\nexport default function ResearchWorkspace({ initialTopic = '', onNavigateToPrompt }: ResearchWorkspaceProps) {\r\n    const [topic, setTopic] = useState(initialTopic);\r\n    const [loading, setLoading] = useState(false);\r\n    const [results, setResults] = useState<SearchResult[]>([]);\r\n    const [aiSummary, setAiSummary] = useState('');\r\n    const [keyFindings, setKeyFindings] = useState<string[]>([]);\r\n    const [isSaved, setIsSaved] = useState(false);\r\n    const [hasSearched, setHasSearched] = useState(false);\r\n\r\n    // Initial Load - Check if topic has data locally\r\n    useEffect(() => {\r\n        if (initialTopic) {\r\n            checkExistingResearch(initialTopic);\r\n        }\r\n    }, [initialTopic]);\r\n\r\n    const checkExistingResearch = async (title: string) => {\r\n        // Try to load from session storage\r\n        try {\r\n            const stored = sessionStorage.getItem(`researchData_${title}`);\r\n            if (stored) {\r\n                const data = JSON.parse(stored);\r\n                if (data.results?.length > 0 || data.summary) {\r\n                    setResults(data.results || []);\r\n                    setAiSummary(data.summary || '');\r\n                    setKeyFindings(data.keyFindings || []);\r\n                    setIsSaved(true);\r\n                    setHasSearched(true);\r\n                }\r\n            }\r\n        } catch (e) {\r\n            console.error(\"Failed to load session research\", e);\r\n        }\r\n    };\r\n\r\n    const handleSearch = async () => {\r\n        if (!topic) return;\r\n        setLoading(true);\r\n        setKeyFindings([]);\r\n        setAiSummary('');\r\n        setAiSummary('');\r\n        setIsSaved(false);\r\n        setHasSearched(false);\r\n\r\n        try {\r\n            const res = await fetch('/api/scraper/search', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ query: topic }),\r\n            });\r\n\r\n            const data = await res.json();\r\n            if (data.success) {\r\n                setResults(data.results || []); // Moved this line here\r\n                setAiSummary(data.aiSummary || ''); // Moved this line here\r\n                setKeyFindings(data.keyFindings || []);\r\n                setHasSearched(true);\r\n\r\n                if (data.results?.length > 0 || data.aiSummary) {\r\n                    // Save to SESSION STORAGE (Temporary)\r\n                    const sessionData = {\r\n                        results: data.results || [],\r\n                        summary: data.aiSummary || '',\r\n                        keyFindings: data.keyFindings || [],\r\n                        lastUpdated: new Date().toISOString()\r\n                    };\r\n                    sessionStorage.setItem(`researchData_${topic}`, JSON.stringify(sessionData));\r\n\r\n                    setIsSaved(true);\r\n                }\r\n            } else {\r\n                alert('Search failed: ' + data.error);\r\n            }\r\n\r\n        } catch (e) {\r\n            console.error('Search failed', e);\r\n            alert('Search failed. See console.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleCopyAll = () => {\r\n        const content = `\r\nTopic: ${topic}\r\n\r\nKey Findings:\r\n${keyFindings.map((f, i) => `${i + 1}. ${f}`).join('\\n')}\r\n\r\nAI Summary:\r\n${aiSummary}\r\n\r\nSources:\r\n${results.map((r, i) => `${i + 1}. ${r.title} - ${r.url}`).join('\\n')}\r\n    `.trim();\r\n        navigator.clipboard.writeText(content);\r\n        alert('Research data copied to clipboard!');\r\n    };\r\n\r\n    const handleSearchAgain = () => {\r\n        setResults([]);\r\n        setKeyFindings([]);\r\n        setAiSummary('');\r\n        setIsSaved(false);\r\n        setHasSearched(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col gap-6 h-full\">\r\n            {/* Search Input Area */}\r\n            <div className=\"card\">\r\n                <div className=\"flex justify-between items-center mb-2\">\r\n                    <label className=\"text-sm font-semibold text-slate-700\">üî¨ Research Topic</label>\r\n                    {isSaved && <span className=\"text-xs text-green-600 font-medium\">‚úÖ Saved to Session</span>}\r\n                </div>\r\n\r\n                <div className=\"flex gap-2\">\r\n                    <input\r\n                        type=\"text\"\r\n                        className=\"form-input flex-1\"\r\n                        placeholder=\"Enter topic (e.g., Antminer S19 Pro Hashboard Not Detected)\"\r\n                        value={topic}\r\n                        onChange={(e) => setTopic(e.target.value)}\r\n                        onKeyDown={(e) => e.key === 'Enter' && handleSearch()}\r\n                    />\r\n                    <button\r\n                        className=\"btn btn-primary min-w-[120px]\"\r\n                        onClick={handleSearch}\r\n                        disabled={loading}\r\n                    >\r\n                        {loading ? 'üîç Searching...' : 'üîç Search'}\r\n                    </button>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Results Area */}\r\n            {(results.length > 0 || aiSummary) && (\r\n                <div className=\"grid md:grid-cols-3 gap-6 flex-1 min-h-0\">\r\n\r\n                    {/* Left Col: Key Findings + Sources */}\r\n                    <div className=\"md:col-span-2 flex flex-col gap-4 overflow-y-auto pr-2 custom-scrollbar\">\r\n\r\n                        {/* KEY FINDINGS BOX */}\r\n                        <div className=\"card bg-amber-50 border-amber-200\">\r\n                            <h3 className=\"font-bold text-amber-900 text-sm mb-3 flex items-center gap-2\">\r\n                                üìä Key Findings\r\n                            </h3>\r\n                            {keyFindings.length > 0 ? (\r\n                                <ul className=\"space-y-2\">\r\n                                    {keyFindings.map((finding, i) => (\r\n                                        <li key={i} className=\"text-sm text-amber-800 flex items-start gap-2\">\r\n                                            <span className=\"text-amber-600\">‚Ä¢</span>\r\n                                            {finding}\r\n                                        </li>\r\n                                    ))}\r\n                                </ul>\r\n                            ) : (\r\n                                <p className=\"text-sm text-amber-800 italic\">No key findings extracted.</p>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* SOURCES */}\r\n                        <div>\r\n                            <h3 className=\"font-bold text-slate-800 mb-3 flex items-center gap-2\">\r\n                                üìö Sources ({results.length} found)\r\n                            </h3>\r\n                            {results.length > 0 ? (\r\n                                <ResearchViewer results={results} />\r\n                            ) : (\r\n                                <p className=\"text-sm text-slate-500 italic\">No sources returned from search providers.</p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* Right Col: AI Summary & Actions */}\r\n                    <div className=\"flex flex-col gap-4\">\r\n                        {/* AI Summary Card */}\r\n                        <div className=\"card bg-indigo-50 border-indigo-100 flex-1\">\r\n                            <h3 className=\"text-sm font-bold text-indigo-900 mb-2 flex items-center gap-2\">\r\n                                üß† AI Summary\r\n                            </h3>\r\n                            <div className=\"text-sm text-indigo-800 leading-relaxed\">\r\n                                {aiSummary || 'Summary not available.'}\r\n                            </div>\r\n                        </div>\r\n\r\n                        {/* ACTION BUTTONS */}\r\n                        <div className=\"card bg-slate-800 text-white border-none\">\r\n                            <h3 className=\"text-sm font-bold mb-3 text-slate-200\">Actions</h3>\r\n                            <div className=\"flex flex-col gap-2\">\r\n                                <button\r\n                                    className=\"btn w-full bg-slate-700 hover:bg-slate-600 text-white border-none text-sm\"\r\n                                    onClick={handleSearchAgain}\r\n                                >\r\n                                    üîÑ Search Again\r\n                                </button>\r\n                                <button\r\n                                    className=\"btn w-full bg-slate-700 hover:bg-slate-600 text-white border-none text-sm\"\r\n                                    onClick={handleCopyAll}\r\n                                >\r\n                                    üìã Copy All Research\r\n                                </button>\r\n                                <button\r\n                                    className=\"btn w-full bg-indigo-600 hover:bg-indigo-700 text-white border-none text-sm\"\r\n                                    onClick={() => onNavigateToPrompt?.({ topic, results, aiSummary })}\r\n                                >\r\n                                    ‚û°Ô∏è Draft Article\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            )}\r\n\r\n            {/* Empty State vs No Results State */}\r\n            {results.length === 0 && !aiSummary && !loading && (\r\n                <div className=\"flex-1 flex items-center justify-center\">\r\n                    {hasSearched ? (\r\n                        <div className=\"text-center text-slate-400 py-20\">\r\n                            <span className=\"text-5xl block mb-4\">ü§∑‚Äç‚ôÇÔ∏è</span>\r\n                            <p className=\"text-lg font-medium text-slate-600\">No results found</p>\r\n                            <p className=\"text-sm mt-2\">Try checking your spelling or a more general topic.</p>\r\n                        </div>\r\n                    ) : (\r\n                        <div className=\"text-center text-slate-400 py-20\">\r\n                            <span className=\"text-5xl block mb-4\">üî¨</span>\r\n                            <p className=\"text-lg\">Enter a topic above to start research</p>\r\n                            <p className=\"text-sm mt-2\">Data will be gathered from DuckDuckGo & Summarized by Gemini</p>\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\components\\ui\\Skeleton.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\dashboard\\articles\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\dashboard\\claude\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\dashboard\\generate\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":32,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":23}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport ArticleGenerator from '@/app/components/ArticleGenerator';\r\nimport { useSearchParams } from 'next/navigation';\r\nimport { useEffect, useState, Suspense } from 'react';\r\n\r\nimport { PromptData } from '@/lib/types';\r\n\r\nfunction ArticleGeneratorWrapper() {\r\n    const searchParams = useSearchParams();\r\n    const topic = searchParams.get('topic') || '';\r\n    const [initialData, setInitialData] = useState<PromptData | null>(null);\r\n    const [loading, setLoading] = useState(!!topic);\r\n\r\n    useEffect(() => {\r\n        // Method 1: Check URL Param (Direct Navigation)\r\n        if (topic) {\r\n            setLoading(true);\r\n            try {\r\n                // Try old method\r\n                const stored = sessionStorage.getItem(`researchData_${topic}`);\r\n                if (stored) {\r\n                    const data = JSON.parse(stored);\r\n                    setInitialData({\r\n                        topic: topic,\r\n                        results: data.results,\r\n                        aiSummary: data.summary\r\n                    });\r\n                } else {\r\n                    setInitialData({ topic });\r\n                }\r\n            } catch (e) {\r\n                setInitialData({ topic });\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n            return;\r\n        }\r\n\r\n        // Method 2: Check Active Session (From Research Lab)\r\n        const activeTopic = sessionStorage.getItem('activeResearchTopic');\r\n        const activeContext = sessionStorage.getItem('activeResearchContext');\r\n\r\n        if (activeTopic && activeContext) {\r\n            setInitialData({\r\n                topic: activeTopic,\r\n                aiSummary: activeContext\r\n            });\r\n            // Clear it so it doesn't persist forever\r\n            sessionStorage.removeItem('activeResearchTopic');\r\n            sessionStorage.removeItem('activeResearchContext');\r\n            setLoading(false);\r\n        } else {\r\n            setLoading(false);\r\n        }\r\n    }, [topic]);\r\n\r\n    if (loading) {\r\n        return <div className=\"p-8 text-center text-slate-500\">Loading research context...</div>;\r\n    }\r\n\r\n    return (\r\n        <ArticleGenerator initialData={initialData} />\r\n    );\r\n}\r\n\r\nexport default function GeneratePage() {\r\n    return (\r\n        <Suspense fallback={<div>Loading...</div>}>\r\n            <ArticleGeneratorWrapper />\r\n        </Suspense>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\dashboard\\keywords\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\dashboard\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\dashboard\\page.tsx","messages":[{"ruleId":"react-hooks/immutability","severity":2,"message":"Error: Cannot access variable before it is declared\n\n`fetchActivityLogs` is accessed before it is declared, which prevents the earlier access from updating when this value changes over time.\n\nC:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\dashboard\\page.tsx:29:9\n  27 |     useEffect(() => {\n  28 |         getDashboardStats().then(setStats);\n> 29 |         fetchActivityLogs();\n     |         ^^^^^^^^^^^^^^^^^ `fetchActivityLogs` accessed before it is declared\n  30 |     }, []);\n  31 |\n  32 |     const fetchActivityLogs = async () => {\n\nC:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\dashboard\\page.tsx:32:5\n  30 |     }, []);\n  31 |\n> 32 |     const fetchActivityLogs = async () => {\n     |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 33 |         setLoadingLogs(true);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 34 |         const { data } = await supabase\n     ‚Ä¶\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 41 |         setLoadingLogs(false);\n     | ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n> 42 |     };\n     | ^^^^^^^ `fetchActivityLogs` is declared here\n  43 |\n  44 |     return (\n  45 |         <div className=\"flex flex-col gap-6\">","line":29,"column":9,"nodeType":null,"endLine":29,"endColumn":26}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, useEffect } from 'react';\r\nimport { getDashboardStats, supabase } from '@/lib/supabase';\r\nimport { Skeleton } from '@/app/components/ui/Skeleton'; // Adjusted import path\r\nimport Link from 'next/link';\r\n\r\ninterface ActivityLog {\r\n    id: string;\r\n    action: string;\r\n    details: string;\r\n    created_at: string;\r\n    target: string;\r\n}\r\n\r\nexport default function DashboardPage() {\r\n    const [stats, setStats] = useState({\r\n        articlesCreated: 0,\r\n        pendingTopics: 0,\r\n        readyToPublish: 0,\r\n        published: 0\r\n    });\r\n\r\n    const [activityLogs, setActivityLogs] = useState<ActivityLog[]>([]);\r\n    const [loadingLogs, setLoadingLogs] = useState(true);\r\n\r\n    useEffect(() => {\r\n        getDashboardStats().then(setStats);\r\n        fetchActivityLogs();\r\n    }, []);\r\n\r\n    const fetchActivityLogs = async () => {\r\n        setLoadingLogs(true);\r\n        const { data } = await supabase\r\n            .from('activity_logs')\r\n            .select('*')\r\n            .order('created_at', { ascending: false })\r\n            .limit(5);\r\n\r\n        if (data) setActivityLogs(data);\r\n        setLoadingLogs(false);\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex flex-col gap-6\">\r\n            <div className=\"page-header\">\r\n                <h1 className=\"page-title\">Dashboard</h1>\r\n            </div>\r\n\r\n            {/* Stats Grid */}\r\n            <div className=\"grid-2 md:grid-4\">\r\n                <div className=\"card border-l-4 border-l-blue-500\">\r\n                    <div className=\"text-sm text-slate-500\">Articles Created</div>\r\n                    <div className=\"text-3xl font-bold mt-1\">{stats.articlesCreated}</div>\r\n                </div>\r\n                <div className=\"card border-l-4 border-l-amber-500\">\r\n                    <div className=\"text-sm text-slate-500\">Pending Topics</div>\r\n                    <div className=\"text-3xl font-bold mt-1\">{stats.pendingTopics}</div>\r\n                </div>\r\n                <div className=\"card border-l-4 border-l-purple-500\">\r\n                    <div className=\"text-sm text-slate-500\">Ready to Publish</div>\r\n                    <div className=\"text-3xl font-bold mt-1\">{stats.readyToPublish}</div>\r\n                </div>\r\n                <div className=\"card border-l-4 border-l-green-500\">\r\n                    <div className=\"text-sm text-slate-500\">Published Live</div>\r\n                    <div className=\"text-3xl font-bold mt-1\">{stats.published}</div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Quick Actions */}\r\n            <div className=\"grid md:grid-cols-2 gap-6\">\r\n                <div className=\"card\">\r\n                    <h3 className=\"card-title mb-4\">Quick Navigation</h3>\r\n                    <div className=\"grid grid-cols-2 gap-3\">\r\n                        <Link href=\"/dashboard/research\" className=\"btn btn-secondary text-left\">\r\n                            üî¨ Start Research\r\n                        </Link>\r\n                        <Link href=\"/dashboard/publish\" className=\"btn btn-secondary text-left\">\r\n                            üöÄ Scheduled Posts\r\n                        </Link>\r\n                        <Link href=\"/dashboard/keywords\" className=\"btn btn-secondary text-left\">\r\n                            üîë Review Keywords\r\n                        </Link>\r\n                        <Link href=\"/dashboard/claude\" className=\"btn btn-secondary text-left\">\r\n                            üìã Final Output\r\n                        </Link>\r\n                    </div>\r\n                </div>\r\n                <div className=\"card bg-slate-50 border-dashed\">\r\n                    <h3 className=\"card-title text-slate-400 mb-4\">System Activity</h3>\r\n                    <div className=\"space-y-3\">\r\n                        {loadingLogs ? (\r\n                            <>\r\n                                <Skeleton className=\"h-5 w-full\" />\r\n                                <Skeleton className=\"h-5 w-3/4\" />\r\n                                <Skeleton className=\"h-5 w-5/6\" />\r\n                            </>\r\n                        ) : activityLogs.length === 0 ? (\r\n                            <div className=\"text-sm text-slate-400\">No activity recorded yet.</div>\r\n                        ) : (\r\n                            activityLogs.map(log => (\r\n                                <div key={log.id} className=\"text-sm text-slate-500 flex gap-2 overflow-hidden\">\r\n                                    <span className=\"text-slate-400 shrink-0\">\r\n                                        {new Date(log.created_at).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })}\r\n                                    </span>\r\n                                    <span className=\"truncate\">{log.details}</span>\r\n                                </div>\r\n                            ))\r\n                        )}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\dashboard\\publish\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\dashboard\\research\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":26,"column":44,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":26,"endColumn":47,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[867,870],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[867,870],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":79,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":79,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2894,2897],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2894,2897],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"react/jsx-no-comment-textnodes","severity":2,"message":"Comments inside children section of tag should be placed inside braces","line":164,"column":58,"nodeType":"JSXText","messageId":"putCommentInBraces","endLine":164,"endColumn":72}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState, Suspense, useEffect } from 'react';\r\nimport { useRouter, useSearchParams } from 'next/navigation';\r\nimport ReactMarkdown from 'react-markdown';\r\n\r\nfunction ResearchLabContent() {\r\n    const router = useRouter();\r\n    const searchParams = useSearchParams();\r\n\r\n    // Fix: Initialize with empty string to avoid Hydration Mismatch\r\n    const [topic, setTopic] = useState('');\r\n    const [isLoading, setIsLoading] = useState(false);\r\n    const [status, setStatus] = useState('Ready');\r\n\r\n    useEffect(() => {\r\n        const urlTopic = searchParams.get('topic');\r\n        if (urlTopic) {\r\n            setTopic(urlTopic);\r\n        }\r\n    }, [searchParams]);\r\n\r\n    // Research Results\r\n    const [factSheet, setFactSheet] = useState('');\r\n    const [reasoning, setReasoning] = useState('');\r\n    const [sources, setSources] = useState<any[]>([]);\r\n\r\n    // Committee Logs (Visualizer)\r\n    const [logs, setLogs] = useState<string[]>([]);\r\n\r\n    const addLog = (msg: string) => setLogs(prev => [...prev, `> ${msg}`]);\r\n\r\n    // Auto-run if topic came from URL? \r\n    // For now, we pre-fill it. User clicks Run.\r\n\r\n    const handleResearch = async () => {\r\n        if (!topic) return;\r\n        setIsLoading(true);\r\n        setStatus('Initializing Deep Research...');\r\n        setLogs([]);\r\n        setFactSheet('');\r\n        setReasoning('');\r\n\r\n        try {\r\n            addLog(`Starting Tri-Engine Search for: \"${topic}\"`);\r\n\r\n            // Call API Action: Research\r\n            const res = await fetch('/api/research', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ action: 'research', topic })\r\n            });\r\n\r\n            const json = await res.json();\r\n\r\n            if (!json.success) throw new Error(json.error);\r\n\r\n            addLog(\"Tri-Engine Search Complete.\");\r\n            addLog(`Found ${json.data.rawSources.length} sources.`);\r\n            addLog(\"Gemini Lite Analysis Complete.\");\r\n\r\n            const safeFactSheet = typeof json.data.factSheet === 'string'\r\n                ? json.data.factSheet\r\n                : typeof json.data.factSheet === 'object'\r\n                    ? JSON.stringify(json.data.factSheet, null, 2)\r\n                    : String(json.data.factSheet || '');\r\n\r\n            const safeReasoning = typeof json.data.reasoning === 'string'\r\n                ? json.data.reasoning\r\n                : typeof json.data.reasoning === 'object'\r\n                    ? JSON.stringify(json.data.reasoning, null, 2)\r\n                    : String(json.data.reasoning || '');\r\n\r\n            setSources(Array.isArray(json.data.rawSources) ? json.data.rawSources : []);\r\n            setFactSheet(safeFactSheet);\r\n            setReasoning(safeReasoning);\r\n            setStatus('Research Complete. Ready to Draft.');\r\n\r\n        } catch (e: any) {\r\n            console.error(e);\r\n            const errorMessage = typeof e.message === 'string' ? e.message : 'Unknown Error';\r\n            setStatus('Error: ' + errorMessage);\r\n            addLog(`ERROR: ${errorMessage}`);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleDraft = () => {\r\n        // Save using the standard format expected by ArticleGenerator\r\n        const payload = {\r\n            results: sources,\r\n            summary: factSheet + (reasoning ? `\\n\\n### Reasoning Trace\\n${reasoning}` : \"\")\r\n        };\r\n\r\n        try {\r\n            sessionStorage.setItem(`researchData_${topic}`, JSON.stringify(payload));\r\n            // Navigate WITH topic param to trigger the robust \"Method 1\" loading logic\r\n            router.push(`/dashboard/generate?topic=${encodeURIComponent(topic)}`);\r\n        } catch (e) {\r\n            console.error(\"Session Save Failed\", e);\r\n            alert(\"Failed to save research data. Storage might be full.\");\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"h-full flex flex-col p-6 gap-6 max-w-7xl mx-auto\">\r\n            {/* HEADER */}\r\n            <div className=\"flex justify-between items-center\">\r\n                <div>\r\n                    <h1 className=\"text-2xl font-bold text-slate-800\">üî¨ Intelligence Lab</h1>\r\n                    <p className=\"text-sm text-slate-500\">Mimo V2 ‚Ä¢ Llama 3.3 ‚Ä¢ Chimera R1 ‚Ä¢ Gemini 2.5</p>\r\n                </div>\r\n                <div className={`px-3 py-1 rounded text-xs font-mono ${isLoading ? 'bg-yellow-100 text-yellow-700 animate-pulse' : 'bg-slate-100 text-slate-600'}`}>\r\n                    STATUS: {typeof status === 'string' ? status : 'Status Unknown'}\r\n                </div>\r\n            </div>\r\n\r\n            {/* MAIN GRID */}\r\n            <div className=\"grid grid-cols-1 lg:grid-cols-12 gap-6 flex-1 min-h-0\">\r\n\r\n                {/* LEFT COLUMN: Controls & Logs (4 cols) */}\r\n                <div className=\"lg:col-span-4 flex flex-col gap-4\">\r\n                    {/* INPUT CARD */}\r\n                    <div className=\"bg-white p-6 rounded-xl shadow-sm border border-slate-200\">\r\n                        <label className=\"text-sm font-semibold text-slate-700 mb-2 block\">Research Topic</label>\r\n                        <div className=\"flex gap-2\">\r\n                            <input\r\n                                type=\"text\"\r\n                                className=\"flex-1 px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none\"\r\n                                placeholder=\"e.g. ASIC Repair Guide\"\r\n                                value={topic}\r\n                                onChange={(e) => setTopic(e.target.value)}\r\n                                onKeyDown={(e) => e.key === 'Enter' && handleResearch()}\r\n                            />\r\n                            <button\r\n                                onClick={handleResearch}\r\n                                disabled={isLoading || !topic}\r\n                                className=\"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-lg font-medium transition-colors disabled:opacity-50\"\r\n                            >\r\n                                {isLoading ? 'Running...' : 'Run'}\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* SOURCE LIST */}\r\n                    <div className=\"bg-slate-50 rounded-xl border border-slate-200 flex-1 flex flex-col min-h-0 overflow-hidden\">\r\n                        <div className=\"p-3 border-b border-slate-200 bg-slate-100 font-semibold text-xs text-slate-600\">\r\n                            DATA SOURCES ({sources.length})\r\n                        </div>\r\n                        <div className=\"p-2 overflow-y-auto flex-1 space-y-2\">\r\n                            {sources.length === 0 && <div className=\"text-center text-slate-400 text-xs py-4\">No sources yet. Run research.</div>}\r\n                            {sources.map((s, i) => (\r\n                                <a key={i} href={s.url} target=\"_blank\" className=\"block p-2 bg-white rounded border border-slate-100 hover:border-indigo-300 transition-colors text-xs text-slate-700 truncate\">\r\n                                    <span className=\"font-bold text-indigo-600 mr-2\">[{i + 1}]</span>\r\n                                    {s.title}\r\n                                </a>\r\n                            ))}\r\n                        </div>\r\n                    </div>\r\n\r\n                    {/* SYSTEM LOGS */}\r\n                    <div className=\"bg-black rounded-xl p-4 font-mono text-xs text-green-400 h-48 overflow-y-auto\">\r\n                        <div className=\"opacity-50 mb-2\">// SYSTEM LOGS</div>\r\n                        {logs.map((log, i) => (\r\n                            <div key={i}>{typeof log === 'string' ? log : JSON.stringify(log)}</div>\r\n                        ))}\r\n                    </div>\r\n                </div>\r\n\r\n                {/* RIGHT COLUMN: Output (8 cols) */}\r\n                <div className=\"lg:col-span-8 flex flex-col gap-4\">\r\n                    {/* RESULTS VIEWER */}\r\n                    <div className=\"bg-white rounded-xl shadow-sm border border-slate-200 flex-1 flex flex-col overflow-hidden relative\">\r\n                        {/* Reasoning Drawer (Collapsible-ish) */}\r\n                        {reasoning && (\r\n                            <div className=\"bg-amber-50 border-b border-amber-100 p-4 max-h-48 overflow-y-auto\">\r\n                                <h3 className=\"text-xs font-bold text-amber-800 mb-1\">ü§ñ MIMO REASONING TRACE</h3>\r\n                                <p className=\"text-xs text-amber-700 whitespace-pre-wrap\">{reasoning}</p>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"flex-1 overflow-y-auto p-8 prose prose-slate max-w-none\">\r\n                            {factSheet ? (\r\n                                <ReactMarkdown>{factSheet}</ReactMarkdown>\r\n                            ) : (\r\n                                <div className=\"h-full flex items-center justify-center text-slate-300\">\r\n                                    <div className=\"text-center\">\r\n                                        <div className=\"text-4xl mb-4\">üß¨</div>\r\n                                        <p>The Lab is empty.</p>\r\n                                        <p className=\"text-sm\">Enter a topic to activate the Tri-Engine.</p>\r\n                                    </div>\r\n                                </div>\r\n                            )}\r\n                        </div>\r\n\r\n                        {/* ACTION BAR */}\r\n                        <div className=\"p-4 border-t border-slate-200 bg-slate-50 flex justify-end\">\r\n                            <button\r\n                                onClick={handleDraft}\r\n                                disabled={!factSheet}\r\n                                className=\"flex items-center gap-2 bg-emerald-600 hover:bg-emerald-700 text-white px-6 py-3 rounded-lg font-bold shadow-lg shadow-emerald-200 transition-all transform hover:-translate-y-1 disabled:opacity-50 disabled:translate-y-0 disabled:shadow-none\"\r\n                            >\r\n                                <span>Enter Writer Studio</span>\r\n                                <span>üëâ</span>\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default function ResearchLab() {\r\n    return (\r\n        <Suspense fallback={<div className=\"p-8 text-center text-slate-400\">Loading Research Lab...</div>}>\r\n            <ResearchLabContent />\r\n        </Suspense>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\dashboard\\tree\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\layout.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\login\\page.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'err' is defined but never used.","line":32,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":32,"endColumn":21}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"'use client';\r\n\r\nimport { useState } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\n\r\nexport default function LoginPage() {\r\n    const [password, setPassword] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState('');\r\n    const router = useRouter();\r\n\r\n    const handleLogin = async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n        setError('');\r\n\r\n        try {\r\n            const res = await fetch('/api/auth/login', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify({ password }),\r\n            });\r\n\r\n            const data = await res.json();\r\n\r\n            if (data.success) {\r\n                router.push('/');\r\n                router.refresh();\r\n            } else {\r\n                setError(data.error || 'Login failed');\r\n            }\r\n        } catch (err) {\r\n            setError('Something went wrong');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-slate-900 p-4\">\r\n            <div className=\"bg-white rounded-xl shadow-2xl p-8 w-full max-w-md\">\r\n                <div className=\"text-center mb-8\">\r\n                    <div className=\"text-4xl mb-2\">‚ö°</div>\r\n                    <h1 className=\"text-2xl font-bold text-slate-800\">ASIC Admin Login</h1>\r\n                    <p className=\"text-slate-500 text-sm\">Restricted Access Area</p>\r\n                </div>\r\n\r\n                <form onSubmit={handleLogin} className=\"space-y-6\">\r\n                    <div>\r\n                        <label className=\"block text-sm font-medium text-slate-700 mb-2\">\r\n                            Admin Password\r\n                        </label>\r\n                        <input\r\n                            type=\"password\"\r\n                            className=\"form-input w-full p-3 border rounded-lg focus:ring-2 focus:ring-indigo-500\"\r\n                            placeholder=\"Enter password...\"\r\n                            value={password}\r\n                            onChange={(e) => setPassword(e.target.value)}\r\n                            autoFocus\r\n                        />\r\n                    </div>\r\n\r\n                    {error && (\r\n                        <div className=\"bg-red-50 text-red-600 text-sm p-3 rounded border border-red-200\">\r\n                            {error}\r\n                        </div>\r\n                    )}\r\n\r\n                    <button\r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"w-full bg-indigo-600 text-white py-3 rounded-lg font-semibold hover:bg-indigo-700 transition disabled:opacity-50\"\r\n                    >\r\n                        {loading ? 'Verifying...' : 'Access Dashboard'}\r\n                    </button>\r\n                </form>\r\n\r\n                <div className=\"mt-8 text-center text-xs text-slate-400\">\r\n                    &copy; 2026 GSD Miners. Secured System.\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\app\\page.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\eslint.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\ai\\committee.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'GoogleGenerativeAI' is defined but never used.","line":2,"column":10,"nodeType":"Identifier","messageId":"unusedVar","endLine":2,"endColumn":28,"suggestions":[{"messageId":"removeUnusedImportDeclaration","data":{"varName":"GoogleGenerativeAI"},"fix":{"range":[34,93],"text":""},"desc":"Remove unused import declaration."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":142,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":142,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5591,5594],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5591,5594],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'fallbackErr' is defined but never used.","line":154,"column":18,"nodeType":"Identifier","messageId":"unusedVar","endLine":154,"endColumn":29},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":177,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":177,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7019,7022],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7019,7022],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { Groq } from 'groq-sdk';\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\n\r\n/**\r\n * THE WRITER COMMITTEE\r\n * \r\n * Orchestrates the 3-Step Writing Process:\r\n * 1. SEO ARCHITECT (Llama 3.3 via Groq)\r\n * 2. FACT VERIFIER (Chimera R1 via OpenRouter)\r\n * 3. FINAL WRITER (Gemini 2.5 Flash via Google)\r\n */\r\n\r\ninterface CommitteeOutput {\r\n    seoOutline: string;\r\n    verificationNotes: string;\r\n    finalArticle: string;\r\n    error?: string;\r\n}\r\n\r\n// --- 1. SEO ARCHITECT ---\r\nasync function runSeoArchitect(topic: string, researchContext: string): Promise<string> {\r\n    console.log(\"üèóÔ∏è [Architect] Llama 3.3 starting...\");\r\n    const groq = new Groq({ apiKey: process.env.GROQ_API_KEY });\r\n\r\n    // Groq Rate Limit Protection: Llama 3.3 has a strict 12k TPM limit.\r\n    // 20,000 chars is approx 5,000 tokens. + 2,000 output tokens = ~7,000 tokens. Safe.\r\n    const SAFE_GROQ_CONTEXT = 20000;\r\n    const truncatedContext = researchContext.substring(0, SAFE_GROQ_CONTEXT);\r\n\r\n    const prompt = `\r\n    TOPIC: ${topic}\r\n    RESEARCH: ${truncatedContext} (Truncated for Groq Rate Limits)\r\n\r\n    You are the SEO ARCHITECT.\r\n    Create a comprehensive BLOG OUTLINE.\r\n    \r\n    1. Define the H1.\r\n    2. Define H2s and H3s structure.\r\n    3. List target keywords for each section.\r\n    4. Define the Tone/Style.\r\n    \r\n    Return ONLY Markdown.\r\n    `;\r\n\r\n    const chatCompletion = await groq.chat.completions.create({\r\n        messages: [{ role: \"user\", content: prompt }],\r\n        model: \"llama-3.3-70b-versatile\",\r\n        temperature: 0.7,\r\n        max_completion_tokens: 2048,\r\n    });\r\n\r\n    return chatCompletion.choices[0]?.message?.content || \"\";\r\n}\r\n\r\n// --- 2. FACT VERIFIER (RESILIENT) ---\r\nasync function runFactVerifier(outline: string, researchContext: string): Promise<string> {\r\n    console.log(\"üïµÔ∏è [Verifier] Chimera R1 starting...\");\r\n    const apiKey = process.env.OPENROUTER_API_KEY;\r\n\r\n    try {\r\n        const response = await fetch(\"https://openrouter.ai/api/v1/chat/completions\", {\r\n            method: \"POST\",\r\n            headers: {\r\n                \"Authorization\": `Bearer ${apiKey}`,\r\n                \"Content-Type\": \"application/json\",\r\n                \"HTTP-Referer\": \"https://asicrepair.in\",\r\n                \"X-Title\": \"ASIC Admin Verifier\"\r\n            },\r\n            body: JSON.stringify({\r\n                \"model\": \"tngtech/deepseek-r1t2-chimera:free\",\r\n                \"messages\": [{\r\n                    \"role\": \"user\",\r\n                    \"content\": `Verify outline. Return \"VERIFIED\" or issues.\\n\\nCONTEXT: ${researchContext.substring(0, 5000)}\\n\\nOUTLINE: ${outline}`\r\n                }]\r\n            })\r\n        });\r\n\r\n        if (!response.ok) throw new Error(`Primary failed: ${response.status}`);\r\n        const data = await response.json();\r\n        return data.choices[0]?.message?.content || \"Verified\";\r\n\r\n    } catch (e) {\r\n        console.warn(\"Verifier Failed (Skipping to preserve flow):\", e);\r\n        return \"Verification Skipped (AI Provider Error). Proceeding with unverified outline.\";\r\n    }\r\n}\r\n\r\n// --- 3. FINAL WRITER (GROQ MIGRATION) ---\r\nasync function runFinalWriter(topic: string, outline: string, researchContext: string, verification: string): Promise<string> {\r\n    console.log(\"‚úçÔ∏è [Writer] Groq Llama 3.3 starting...\");\r\n    const apiKey = process.env.GROQ_API_KEY;\r\n    if (!apiKey) throw new Error(\"Missing GROQ_API_KEY\");\r\n\r\n    const groq = new Groq({ apiKey });\r\n\r\n    // STRICT RATE LIMIT PROTECTION\r\n    // Groq Limit: 12,000 Tokens/Minute.\r\n    // Goal: Use max ~6,000 Input Tokens to allow ~4,000 Output Tokens.\r\n    // 1 Token ~= 4 Chars. -> 6,000 Tokens ~= 24,000 Chars.\r\n    // Safety Buffer: Limit Context to 15,000 Chars (~3,750 Tokens).\r\n    const MAX_CONTEXT_CHARS = 15000;\r\n\r\n    const finalPrompt = `\r\n    You are the FINAL WRITER.\r\n    \r\n    TOPIC: ${topic}\r\n    OUTLINE: ${outline}\r\n    VERIFICATION NOTES: ${verification}\r\n    \r\n    RESEARCH DATA (Truncated for Rate Limits):\r\n    ${researchContext.substring(0, MAX_CONTEXT_CHARS)}\r\n    \r\n    TASK:\r\n    Write a High-Quality, Human-Like Blog Post (400 - 2000 words).\r\n    \r\n    STYLE & GOALS:\r\n    1. **REPAIR CENTRIC**: You are an Expert ASIC Technician. Use correct industry jargon (e.g., \"logs\", \"hashboards\", \"soldering\", \"diagnostics\"). Be authoritative.\r\n    2. **SEO FRIENDLY**: Naturally integrate keywords. Do not keyword stuff. Structure with clear H2/H3 for readability.\r\n    3. **HUMANIZED & SALES DRIVEN**: \r\n       - ‚ùå Avoid AI fluff (\"In the realm of...\", \"Unlock the potential...\").\r\n       - ‚úÖ Write like a human speaking to a customer.\r\n       - ‚úÖ **GOAL**: Attract customers to our repair services/courses. solve their problem, then offer our help.\r\n    4. **LENGTH**: 400 - 2000 words (including space for human edits).\r\n    \r\n    STRUCTURE:\r\n    - **Hook**: Grab attention immediately (Repair problem/solution).\r\n    - **Body**: Technical steps, diagrams (described), or analysis.\r\n    - **Conclusion**: Summary + **Strong Call to Action** (Visit ASICREPAIR.IN).\r\n    \r\n    Synthesize the research. If research is thin, rely on your \"Technician Persona\" to fill gaps logically.\r\n    `;\r\n\r\n    try {\r\n        const chatCompletion = await groq.chat.completions.create({\r\n            messages: [{ role: \"user\", content: finalPrompt }],\r\n            model: \"llama-3.3-70b-versatile\",\r\n            temperature: 0.7,\r\n            max_completion_tokens: 4096, // Allow long articles\r\n        });\r\n\r\n        return chatCompletion.choices[0]?.message?.content || \"Failed to generate article content.\";\r\n    } catch (e: any) {\r\n        console.error(\"Writer (Groq) Failed:\", e);\r\n        // Fallback: If 70b fails (limit?), try 8b (faster/cheaper)\r\n        try {\r\n            console.log(\"‚ö†Ô∏è Switching to Llama 3.1 8b Fallback...\");\r\n            const fallbackCompletion = await groq.chat.completions.create({\r\n                messages: [{ role: \"user\", content: finalPrompt }],\r\n                model: \"llama-3.1-8b-instant\",\r\n                temperature: 0.7,\r\n                max_completion_tokens: 4096,\r\n            });\r\n            return fallbackCompletion.choices[0]?.message?.content || \"Failed to generate fallback article.\";\r\n        } catch (fallbackErr) {\r\n            throw new Error(`Groq Writer Failed (Primary & Fallback): ${e.message}`);\r\n        }\r\n    }\r\n}\r\n\r\n// --- ORCHESTRATOR ---\r\nexport async function runCommittee(topic: string, researchContext: string): Promise<CommitteeOutput> {\r\n    let outline = \"\";\r\n    let verification = \"\";\r\n\r\n    try {\r\n        // 1. Architect (Groq - Usually Reliable)\r\n        outline = await runSeoArchitect(topic, researchContext);\r\n\r\n        // 2. Verifier (Soft Fail)\r\n        verification = await runFactVerifier(outline, researchContext);\r\n\r\n        // 3. Writer (With Fallback)\r\n        const finalArticle = await runFinalWriter(topic, outline, researchContext, verification);\r\n\r\n        return { seoOutline: outline, verificationNotes: verification, finalArticle };\r\n\r\n    } catch (e: any) {\r\n        console.error(\"Committee Critical Failure:\", e);\r\n\r\n        // RECOVERY: If we at least have the outline, return that!\r\n        if (outline) {\r\n            return {\r\n                seoOutline: outline,\r\n                verificationNotes: verification || \"Skipped\",\r\n                finalArticle: `## ‚ö†Ô∏è AI Writer Quota Exceeded\\n\\n**The system generated the outline successfully, but the Writer AI is currently overloaded.**\\n\\n### Generated Outline:\\n${outline}\\n\\n*Please copy this outline and use it manually, or try again in 10 minutes.*`,\r\n                error: \"Writer Failed, Outline Preserved.\"\r\n            };\r\n        }\r\n\r\n        return { seoOutline: \"\", verificationNotes: \"\", finalArticle: \"\", error: e.message };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\ai\\openrouter.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":78,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":78,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3065,3068],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3065,3068],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":90,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":90,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3549,3552],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3549,3552],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":153,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":153,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5847,5850],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5847,5850],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":163,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":163,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":163,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":163,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6272,6275],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6272,6275],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'error' is defined but never used.","line":170,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":170,"endColumn":19},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":170,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":170,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6550,6553],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6550,6553],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":179,"column":26,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":179,"endColumn":29,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6922,6925],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6922,6925],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":6,"fatalErrorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { GoogleGenerativeAI } from \"@google/generative-ai\";\r\nimport { Groq } from \"groq-sdk\";\r\n\r\n/**\r\n * DEEP CONSENSUS ENGINE (v3 - Groq Enhanced)\r\n * \r\n * This client manages the \"Council of Agents\" for robust article generation.\r\n * It implements a 4-tier safety net:\r\n * 1. Primary OpenRouter Model (e.g., DeepSeek R1)\r\n * 2. The \"Groq Bridge\" (Llama 3.3 70B - Fast & Reliable)\r\n * 3. Alternate OpenRouter Model\r\n * 4. The \"Gemini Floor\" (Direct Google API - Last Resort)\r\n */\r\n\r\n// ---------------------------------------------------------------------------\r\n// 1. CONFIGURATION: The \"Council\" Roster\r\n// ---------------------------------------------------------------------------\r\n\r\nexport type AgentRole = 'RESEARCHER' | 'REASONER' | 'OUTLINER' | 'WRITER';\r\n\r\ninterface ModelPair {\r\n    primary: string;\r\n    alternate: string;\r\n}\r\n\r\n// Map Roles to Specific Free Models\r\nconst AGENT_ROSTER: Record<AgentRole, ModelPair> = {\r\n    RESEARCHER: {\r\n        primary: \"google/gemini-2.0-flash-exp:free\",\r\n        alternate: \"google/gemini-2.0-pro-exp-02-05:free\"\r\n    },\r\n    REASONER: {\r\n        primary: \"deepseek/deepseek-r1:free\",\r\n        alternate: \"nvidia/llama-3.1-nemotron-70b-instruct:free\"\r\n    },\r\n    OUTLINER: {\r\n        primary: \"meta-llama/llama-3.1-8b-instruct:free\",\r\n        alternate: \"mistralai/mistral-7b-instruct:free\"\r\n    },\r\n    WRITER: {\r\n        primary: \"google/gemini-2.0-flash-exp:free\",\r\n        alternate: \"google/gemini-2.0-pro-exp-02-05:free\"\r\n    }\r\n};\r\n\r\n// ---------------------------------------------------------------------------\r\n// 2. THE GEMINI FLOOR (Ultimate Safety Net)\r\n// ---------------------------------------------------------------------------\r\n\r\nasync function callGeminiDirect(prompt: string, systemInstruction?: string): Promise<string> {\r\n    const apiKey = process.env.GEMINI_API_KEY;\r\n    if (!apiKey) throw new Error(\"CRITICAL: No GEMINI_API_KEY found for emergency fallback.\");\r\n\r\n    try {\r\n        const genAI = new GoogleGenerativeAI(apiKey);\r\n        // Using 'gemini-1.5-flash-8b' as it is often separate quota from the main 2.0/1.5 models\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-1.5-flash-8b\" });\r\n\r\n        const fullPrompt = systemInstruction ? `${systemInstruction}\\n\\n${prompt}` : prompt;\r\n        const result = await model.generateContent(fullPrompt);\r\n        return result.response.text();\r\n    } catch (error) {\r\n        console.error(\"‚ùå GEMINI FLOOR FAILED:\", error);\r\n        throw new Error(\"TOTAL SYSTEM FAILURE: OpenRouter, Groq, and Gemini all failed.\");\r\n    }\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// 3. THE GROQ BRIDGE (Reliable Layer)\r\n// ---------------------------------------------------------------------------\r\n\r\nasync function callGroqDirect(prompt: string, systemInstruction?: string): Promise<string> {\r\n    const apiKey = process.env.GROQ_API_KEY;\r\n    if (!apiKey) throw new Error(\"No GROQ_API_KEY configured.\");\r\n\r\n    try {\r\n        const groq = new Groq({ apiKey });\r\n        const messages: any[] = [];\r\n        if (systemInstruction) messages.push({ role: \"system\", content: systemInstruction });\r\n        messages.push({ role: \"user\", content: prompt });\r\n\r\n        const completion = await groq.chat.completions.create({\r\n            messages: messages,\r\n            model: \"llama-3.3-70b-versatile\",\r\n            temperature: 0.7,\r\n            max_completion_tokens: 4096\r\n        });\r\n\r\n        return completion.choices[0]?.message?.content || \"\";\r\n    } catch (error: any) {\r\n        console.warn(\"‚ö†Ô∏è Groq Bridge Failed:\", error.message);\r\n        throw error;\r\n    }\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// 4. OPENROUTER CLIENT (With Circuit Breakers)\r\n// ---------------------------------------------------------------------------\r\n\r\nasync function sleep(ms: number) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\nasync function callOpenRouterRaw(modelId: string, prompt: string, systemInstruction?: string): Promise<string> {\r\n    const apiKey = process.env.OPENROUTER_API_KEY;\r\n    if (!apiKey) throw new Error(\"No OPENROUTER_API_KEY configured.\");\r\n\r\n    const messages = [];\r\n    if (systemInstruction) messages.push({ role: \"system\", content: systemInstruction });\r\n    messages.push({ role: \"user\", content: prompt });\r\n\r\n    const response = await fetch(\"https://openrouter.ai/api/v1/chat/completions\", {\r\n        method: \"POST\",\r\n        headers: {\r\n            \"Authorization\": `Bearer ${apiKey}`,\r\n            \"HTTP-Referer\": \"https://asicrepair.in\",\r\n            \"X-Title\": \"ASIC Admin Consensus\",\r\n            \"Content-Type\": \"application/json\"\r\n        },\r\n        body: JSON.stringify({\r\n            model: modelId,\r\n            messages: messages,\r\n            temperature: 0.7,\r\n            top_p: 0.9,\r\n        })\r\n    });\r\n\r\n    if (!response.ok) {\r\n        if (response.status === 429) throw new Error(`RATE_LIMIT`);\r\n        const errorText = await response.text();\r\n        throw new Error(`OpenRouter Error (${response.status}): ${errorText}`);\r\n    }\r\n\r\n    const data = await response.json();\r\n    return data.choices?.[0]?.message?.content || \"\";\r\n}\r\n\r\n// ---------------------------------------------------------------------------\r\n// 5. MAIN ORCHESTRATOR\r\n// ---------------------------------------------------------------------------\r\n\r\nexport async function smartGenerate(\r\n    role: AgentRole,\r\n    prompt: string,\r\n    systemInstruction?: string\r\n): Promise<string> {\r\n    const models = AGENT_ROSTER[role];\r\n    console.log(`ü§ñ [${role}] Activating. Trying Chain: OpenRouter -> Groq -> Gemini.`);\r\n\r\n    // ATTEMPT 1: Primary Model (OpenRouter)\r\n    try {\r\n        return await callOpenRouterRaw(models.primary, prompt, systemInstruction);\r\n    } catch (error: any) {\r\n        console.warn(`‚ö†Ô∏è [${role}] Primary (${models.primary}) failed. Switching to Groq...`);\r\n        if (error.message.includes('RATE_LIMIT')) await sleep(1000);\r\n    }\r\n\r\n    // ATTEMPT 2: The Groq Bridge (Llama 3.3)\r\n    try {\r\n        const groqResult = await callGroqDirect(prompt, systemInstruction);\r\n        console.log(`‚úÖ [${role}] Saved by Groq Bridge.`);\r\n        return groqResult;\r\n    } catch (error: any) {\r\n        console.warn(`‚ö†Ô∏è [${role}] Groq Bridge failed. Switching to Alternate OpenRouter...`);\r\n    }\r\n\r\n    // ATTEMPT 3: Alternate Model (OpenRouter)\r\n    try {\r\n        return await callOpenRouterRaw(models.alternate, prompt, systemInstruction);\r\n    } catch (error: any) {\r\n        console.error(`üö® [${role}] Alternate (${models.alternate}) failed. ACTIVATING GEMINI FLOOR.`);\r\n    }\r\n\r\n    // ATTEMPT 4: Gemini Floor (Direct API)\r\n    try {\r\n        const floorResult = await callGeminiDirect(prompt, systemInstruction);\r\n        console.log(`‚úÖ [${role}] Saved by Gemini Floor.`);\r\n        return floorResult;\r\n    } catch (fatalError: any) {\r\n        return `SYSTEM_ERROR: Unable to generate content. Details: ${fatalError.message}`;\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\ai\\researcher.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":62,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":62,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2161,2164],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2161,2164],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { GoogleGenerativeAI } from '@google/generative-ai';\r\n\r\n/**\r\n * THE RESEARCHER AGENT (Gemini 2.0 Flash via Google AI Studio)\r\n * \r\n * Capability: PROCESSED REASONING\r\n * This agent reads raw search results and synthesizes them into a Master Fact Sheet.\r\n */\r\n\r\ninterface ResearcherResponse {\r\n    content: string;\r\n    reasoning?: string;\r\n    error?: string;\r\n}\r\n\r\nexport async function mimoResearch(query: string, context: string): Promise<ResearcherResponse> {\r\n    const apiKey = process.env.GEMINI_API_KEY; // Switching to Google AI Studio Key\r\n    if (!apiKey) throw new Error(\"Missing GEMINI_API_KEY\");\r\n\r\n    // Safety Truncation: Gemini 2.0 has 1M context, but let's be safe and focused.\r\n    // 100k chars is plenty for a summary and safe for the Flash model.\r\n    const MAX_CONTEXT = 100000;\r\n    const safeContext = context.length > MAX_CONTEXT\r\n        ? context.substring(0, MAX_CONTEXT) + \"\\n...(Truncated)...\"\r\n        : context;\r\n\r\n    const prompt = `\r\n    QUERY: ${query}\r\n\r\n    CONTEXT (Search Results):\r\n    ${safeContext}\r\n\r\n    TASK:\r\n    You are an Expert Technical Researcher.\r\n    Read the provided context deeply.\r\n    Create a \"Master Fact Sheet\" in Markdown.\r\n    \r\n    Structure:\r\n    1. **Key Specifications/Facts** (Hard data)\r\n    2. **Common Issues & Solutions** (From Reddit/Forums)\r\n    3. **Technical Nuances** (Hidden details)\r\n    4. **Source Verification** (Which sources are credible?)\r\n\r\n    Do NOT write a blog post. Write a dense internal briefing for a Writer.\r\n    `;\r\n\r\n    try {\r\n        const genAI = new GoogleGenerativeAI(apiKey);\r\n        // Switching back to 'gemini-2.0-flash-exp' as it is the ONLY one working in deep verification.\r\n        const model = genAI.getGenerativeModel({ model: \"gemini-2.0-flash-exp\" });\r\n\r\n        const result = await model.generateContent(prompt);\r\n        const text = result.response.text();\r\n\r\n        if (!text) throw new Error(\"Received empty output from Gemini Researcher\");\r\n\r\n        return {\r\n            content: text,\r\n            reasoning: \"\" // Google SDK doesn't expose reasoning trace same way as DeepSeek/OpenRouter\r\n        };\r\n\r\n    } catch (error: any) {\r\n        console.error(\"Research Agent (Google) Failed:\", error);\r\n        return { content: \"\", error: error.message };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\articleActions.ts","messages":[{"ruleId":"prefer-const","severity":2,"message":"'timeToUse' is never reassigned. Use 'const' instead.","line":110,"column":9,"nodeType":"Identifier","messageId":"useConst","endLine":110,"endColumn":18,"fix":{"range":[3592,3636],"text":"const timeToUse = scheduledTime || '09:00:00';"}},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":165,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":165,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[5537,5540],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[5537,5540],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":190,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":190,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6437,6440],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6437,6440],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":215,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":215,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7337,7340],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7337,7340],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":253,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":253,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[8703,8706],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[8703,8706],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":5,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import { supabase } from './supabase';\r\nimport { Topic, Article } from './supabase';\r\n\r\n// Fetch recent topics (History + Pending) for the Claude Output dropdown\r\n// Fetch topics for the dropdown: ALL Pending/In-Progress + Last 50 History\r\nexport async function fetchRecentTopics(): Promise<Topic[]> {\r\n    // 1. Fetch ALL pending/in-progress\r\n    const { data: pendingData, error: pendingError } = await supabase\r\n        .from('topics')\r\n        .select('*')\r\n        .in('status', ['pending', 'in-progress'])\r\n        .order('created_at', { ascending: false });\r\n\r\n    if (pendingError) {\r\n        console.error('Error fetching pending topics:', pendingError);\r\n        return [];\r\n    }\r\n\r\n    // 2. Fetch last 50 'done' (History)\r\n    const { data: historyData, error: historyError } = await supabase\r\n        .from('topics')\r\n        .select('*')\r\n        .eq('status', 'done')\r\n        .order('created_at', { ascending: false })\r\n        .limit(50);\r\n\r\n    if (historyError) {\r\n        console.error('Error fetching history topics:', historyError);\r\n    }\r\n\r\n    // 3. Combine\r\n    return [...(pendingData || []), ...(historyData || [])];\r\n}\r\n\r\n// Keep this for compatibility if needed, or deprecate\r\nexport async function fetchPendingTopics(): Promise<Topic[]> {\r\n    return fetchRecentTopics();\r\n}\r\n\r\n// Save article from Claude Output and update topic status\r\nexport async function saveArticle(topicId: string, title: string, content: string, category?: string): Promise<{ success: boolean; articleId?: string; error?: string }> {\r\n    // 1. Insert article\r\n    const { data: articleData, error: articleError } = await supabase\r\n        .from('articles')\r\n        .insert({\r\n            topic_id: topicId,\r\n            title,\r\n            content,\r\n            category,\r\n            status: 'ready'\r\n        })\r\n        .select()\r\n        .single();\r\n\r\n    if (articleError) {\r\n        console.error('Error saving article:', articleError);\r\n        return { success: false, error: articleError.message };\r\n    }\r\n\r\n    // 2. Update topic status to 'done'\r\n    const { error: topicError } = await supabase\r\n        .from('topics')\r\n        .update({ status: 'done' })\r\n        .eq('id', topicId);\r\n\r\n    if (topicError) {\r\n        console.error('Error updating topic status:', topicError);\r\n        // Article was saved, but topic status failed - partial success\r\n    }\r\n\r\n    // Log user activity\r\n    await import('./logger').then(l => l.logActivity('CREATE', 'Article', `Created article: ${title}`));\r\n\r\n    return { success: true, articleId: articleData.id };\r\n}\r\n\r\n// Fetch all articles\r\nexport async function fetchArticles(): Promise<Article[]> {\r\n    const { data, error } = await supabase\r\n        .from('articles')\r\n        .select('*')\r\n        .order('created_at', { ascending: false });\r\n\r\n    if (error) {\r\n        console.error('Error fetching articles:', error);\r\n        return [];\r\n    }\r\n    return data || [];\r\n}\r\n\r\n// Move article to publish queue with optional scheduling\r\nexport async function moveToPublish(\r\n    articleId: string,\r\n    scheduledDate?: string,\r\n    scheduledTime?: string\r\n): Promise<{ success: boolean; error?: string; queueId?: string }> {\r\n    // Check if already in queue\r\n    const { data: existing } = await supabase\r\n        .from('publish_queue')\r\n        .select('id')\r\n        .eq('article_id', articleId)\r\n        .single();\r\n\r\n    if (existing) {\r\n        return { success: false, error: 'Article already in publish queue' };\r\n    }\r\n\r\n    // Default to tomorrow 09:00 IST if not provided\r\n    let dateToUse = scheduledDate;\r\n    let timeToUse = scheduledTime || '09:00:00';\r\n\r\n    if (!dateToUse) {\r\n        // Calculate tomorrow in IST (GMT+5:30)\r\n        const now = new Date();\r\n        const istOffset = 5.5 * 60 * 60 * 1000; // 5h 30m in ms\r\n        const istNow = new Date(now.getTime() + istOffset);\r\n        istNow.setDate(istNow.getDate() + 1); // Tomorrow\r\n        dateToUse = istNow.toISOString().split('T')[0];\r\n    }\r\n\r\n    const { data, error } = await supabase\r\n        .from('publish_queue')\r\n        .insert({\r\n            article_id: articleId,\r\n            scheduled_date: dateToUse,\r\n            scheduled_time: timeToUse,\r\n            status: 'scheduled'\r\n        })\r\n        .select('id')\r\n        .single();\r\n\r\n    if (error) {\r\n        console.error('Error moving to publish:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n\r\n    // Update article status\r\n    await supabase.from('articles').update({ status: 'scheduled' }).eq('id', articleId);\r\n\r\n    // Log activity\r\n    await import('./logger').then(l => l.logActivity('UPDATE', 'Article', `Scheduled article for publishing: ${articleId}`));\r\n\r\n    return { success: true, queueId: data.id };\r\n}\r\n\r\n// Unpublish article - removes from public blog but keeps in admin\r\nexport async function unpublishArticle(articleId: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n        const response = await fetch('/api/articles/unpublish', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ articleId })\r\n        });\r\n\r\n        const result = await response.json();\r\n\r\n        if (!response.ok) {\r\n            throw new Error(result.error || 'Failed to unpublish');\r\n        }\r\n\r\n        // Log activity\r\n        await import('./logger').then(l => l.logActivity('UPDATE', 'Article', `Unpublished article ID: ${articleId}`));\r\n\r\n        return { success: true };\r\n    } catch (err: any) {\r\n        console.error('Error unpublishing article:', err);\r\n        return { success: false, error: err.message };\r\n    }\r\n}\r\n\r\n// Delete article completely - removes from admin, queue, and public blog\r\nexport async function deleteArticle(articleId: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n        const response = await fetch('/api/articles/delete', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ articleId })\r\n        });\r\n\r\n        const result = await response.json();\r\n\r\n        if (!response.ok) {\r\n            throw new Error(result.error || 'Failed to delete');\r\n        }\r\n\r\n        // Log activity\r\n        await import('./logger').then(l => l.logActivity('DELETE', 'Article', `Deleted article ID: ${articleId}`));\r\n\r\n        return { success: true };\r\n    } catch (err: any) {\r\n        console.error('Error deleting article:', err);\r\n        return { success: false, error: err.message };\r\n    }\r\n}\r\n\r\n// Update article content/title\r\nexport async function updateArticle(articleId: string, title: string, content: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n        const { error } = await supabase\r\n            .from('articles')\r\n            .update({\r\n                title,\r\n                content,\r\n                // If it was published/ready, maybe we should keep status? \r\n                // For now, let's assume editing doesn't unpublish unless specified.\r\n            })\r\n            .eq('id', articleId);\r\n\r\n        if (error) throw error;\r\n\r\n        // Log activity\r\n        await import('./logger').then(l => l.logActivity('UPDATE', 'Article', `Updated article: ${title}`));\r\n\r\n        return { success: true };\r\n    } catch (err: any) {\r\n        console.error('Error updating article:', err);\r\n        return { success: false, error: err.message };\r\n    }\r\n}\r\n// Check if a bucket exists\r\nexport async function checkBucketExists(bucketName: string): Promise<boolean> {\r\n    const { data, error } = await supabase.storage.getBucket(bucketName);\r\n    return !error && !!data;\r\n}\r\n\r\n// Upload image to Supabase Storage\r\nexport async function uploadImage(file: File): Promise<{ success: boolean; url?: string; error?: string }> {\r\n    try {\r\n        const bucketName = 'blog-assets'; // Standardizing on 'blog-assets'\r\n\r\n        // Generate unique filename\r\n        const fileExt = file.name.split('.').pop();\r\n        const fileName = `${Date.now()}-${Math.random().toString(36).substring(2, 15)}.${fileExt}`;\r\n        const filePath = `uploads/${fileName}`;\r\n\r\n        // Upload\r\n        const { error: uploadError } = await supabase.storage\r\n            .from(bucketName)\r\n            .upload(filePath, file);\r\n\r\n        if (uploadError) {\r\n            console.error('Upload error:', uploadError);\r\n            return { success: false, error: uploadError.message };\r\n        }\r\n\r\n        // Get Public URL\r\n        const { data } = supabase.storage\r\n            .from(bucketName)\r\n            .getPublicUrl(filePath);\r\n\r\n        return { success: true, url: data.publicUrl };\r\n\r\n    } catch (err: any) {\r\n        console.error('Unexpected upload error:', err);\r\n        return { success: false, error: err.message };\r\n    }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\auth.ts","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'e' is defined but never used.","line":40,"column":14,"nodeType":"Identifier","messageId":"unusedVar","endLine":40,"endColumn":15}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { SignJWT, jwtVerify } from 'jose';\r\nimport { cookies } from 'next/headers';\r\n\r\nif (!process.env.JWT_SECRET) {\r\n    throw new Error('FATAL: JWT_SECRET is not defined in environment variables.');\r\n}\r\n\r\nconst SECRET_KEY = new TextEncoder().encode(process.env.JWT_SECRET);\r\n\r\nexport async function createSession() {\r\n    // 1-day expiration\r\n    const expires = new Date(Date.now() + 24 * 60 * 60 * 1000);\r\n    const session = await new SignJWT({ role: 'admin' })\r\n        .setProtectedHeader({ alg: 'HS256' })\r\n        .setIssuedAt()\r\n        .setExpirationTime('24h')\r\n        .sign(SECRET_KEY);\r\n\r\n    const cookieStore = await cookies();\r\n    cookieStore.set('session', session, {\r\n        expires,\r\n        httpOnly: true,\r\n        secure: process.env.NODE_ENV === 'production',\r\n        sameSite: 'lax',\r\n        path: '/',\r\n    });\r\n}\r\n\r\nexport async function verifySession() {\r\n    const cookieStore = await cookies();\r\n    const session = cookieStore.get('session')?.value;\r\n\r\n    if (!session) return null;\r\n\r\n    try {\r\n        const { payload } = await jwtVerify(session, SECRET_KEY, {\r\n            algorithms: ['HS256'],\r\n        });\r\n        return payload;\r\n    } catch (e) {\r\n        return null; // Invalid token\r\n    }\r\n}\r\n\r\nexport async function deleteSession() {\r\n    const cookieStore = await cookies();\r\n    cookieStore.delete('session');\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\blogStyles.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\blogTreeActions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\blogTreeData.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\keywordActions.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\logger.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\publishActions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1847,1850],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1847,1850],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { supabase } from './supabase';\r\nimport { PublishItem, Article } from './supabase';\r\n\r\n\r\n// Fetch publish queue with article details\r\nexport async function fetchPublishQueue(): Promise<(PublishItem & { articles: Article })[]> {\r\n    const { data, error } = await supabase\r\n        .from('publish_queue')\r\n        .select(`\r\n            *,\r\n            articles (*)\r\n        `)\r\n        .order('scheduled_date', { ascending: true });\r\n\r\n    if (error) {\r\n        console.error('Error fetching publish queue:', error);\r\n        return [];\r\n    }\r\n    return (data || []) as (PublishItem & { articles: Article })[];\r\n}\r\n\r\n// Update schedule for a publish queue item\r\nexport async function updateSchedule(id: string, date: string, time: string): Promise<{ success: boolean; error?: string }> {\r\n    const { error } = await supabase\r\n        .from('publish_queue')\r\n        .update({\r\n            scheduled_date: date,\r\n            scheduled_time: time,\r\n            status: 'scheduled'\r\n        })\r\n        .eq('id', id);\r\n\r\n    if (error) {\r\n        console.error('Error updating schedule:', error);\r\n        return { success: false, error: error.message };\r\n    }\r\n    return { success: true };\r\n}\r\n\r\n// Publish immediately (via Server API to bypass RLS)\r\nexport async function publishNow(queueId: string, articleId: string): Promise<{ success: boolean; error?: string }> {\r\n    try {\r\n        const response = await fetch('/api/publish', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({ queueId, articleId })\r\n        });\r\n\r\n        const result = await response.json();\r\n\r\n        if (!response.ok) {\r\n            return { success: false, error: result.error || 'Failed to publish via API' };\r\n        }\r\n\r\n        return { success: true };\r\n    } catch (err: any) {\r\n        console.error('Error calling publish API:', err);\r\n        return { success: false, error: err.message };\r\n    }\r\n}\r\n\r\n// Cancel scheduling\r\nexport async function cancelSchedule(queueId: string, articleId: string): Promise<{ success: boolean; error?: string }> {\r\n    // Delete from queue\r\n    const { error: queueError } = await supabase\r\n        .from('publish_queue')\r\n        .delete()\r\n        .eq('id', queueId);\r\n\r\n    if (queueError) {\r\n        console.error('Error deleting from queue:', queueError);\r\n        return { success: false, error: queueError.message };\r\n    }\r\n\r\n    // Update article status back to ready\r\n    await supabase.from('articles').update({ status: 'ready' }).eq('id', articleId);\r\n\r\n    return { success: true };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\researchActions.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":5,"column":14,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":5,"endColumn":17,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[131,134],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[131,134],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { supabase } from './supabase';\r\n\r\nexport async function saveTopicResearch(topicId: string, researchData: {\r\n    results: any[];\r\n    summary: string;\r\n    keyFindings: string[];\r\n    lastUpdated: string;\r\n}) {\r\n    const { data, error } = await supabase\r\n        .from('topics')\r\n        .update({\r\n            research_data: researchData,\r\n            status: 'researched' // Advance status\r\n        })\r\n        .eq('title', topicId) // Currently using title as ID in UI often, but should use ID if possible. \r\n        // Wait, BlogTree passes \"topic\" string (title) to onSelectTopic. \r\n        // We should probably pass the ID. For now I'll stick to Title OR fix BlogTree to pass object.\r\n        // Let's assume input is Title for now based on current UI, but ideally we match by ID.\r\n        // I will try to match by title first.\r\n        .select();\r\n\r\n    return { data, error };\r\n}\r\n\r\nexport async function getTopicResearch(topicTitle: string) {\r\n    const { data, error } = await supabase\r\n        .from('topics')\r\n        .select('research_data, status')\r\n        .eq('title', topicTitle)\r\n        .single();\r\n\r\n    return { data, error };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\researchProviders.test.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\researchProviders.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":34,"column":54,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":34,"endColumn":57,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1169,1172],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1169,1172],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":42,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":42,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1377,1380],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1377,1380],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":63,"column":75,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":63,"endColumn":78,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2208,2211],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2208,2211],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":71,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":71,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2447,2450],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2447,2450],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":93,"column":70,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":93,"endColumn":73,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3261,3264],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3261,3264],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":110,"column":59,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":110,"endColumn":62,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4034,4037],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4034,4037],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":119,"column":17,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":119,"endColumn":20,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[4359,4362],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[4359,4362],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-unused-vars","severity":1,"message":"'parseError' is defined but never used.","line":163,"column":22,"nodeType":"Identifier","messageId":"unusedVar","endLine":163,"endColumn":32},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":176,"column":74,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":176,"endColumn":77,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[6628,6631],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[6628,6631],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":196,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":196,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[7248,7251],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[7248,7251],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":9,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import { SearchResult } from './types';\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\n\r\ninterface ProviderResult {\r\n    provider: 'tavily' | 'brave' | 'serper' | 'gemini';\r\n    results: SearchResult[];\r\n    error?: string;\r\n}\r\n\r\nconst SLEEP_MS = 5000; // 5 seconds wait for rate limits\r\n\r\nasync function wait(ms: number) {\r\n    return new Promise(resolve => setTimeout(resolve, ms));\r\n}\r\n\r\n// --- TAVILY ---\r\nexport async function searchTavily(query: string, apiKey: string): Promise<ProviderResult> {\r\n    try {\r\n        const response = await fetch('https://api.tavily.com/search', {\r\n            method: 'POST',\r\n            headers: { 'Content-Type': 'application/json' },\r\n            body: JSON.stringify({\r\n                api_key: apiKey,\r\n                query: query,\r\n                search_depth: \"advanced\", // UPDATED: Advanced depth for deep context\r\n                include_answer: true,\r\n                max_results: 5\r\n            }),\r\n        });\r\n\r\n        if (!response.ok) throw new Error(`Tavily error: ${response.statusText}`);\r\n        const data = await response.json();\r\n\r\n        const results = (data.results || []).map((r: any) => ({\r\n            title: r.title,\r\n            url: r.url,\r\n            content: r.content,\r\n            score: r.score\r\n        }));\r\n\r\n        return { provider: 'tavily', results };\r\n    } catch (e: any) {\r\n        console.error('Tavily Search Failed:', e.message);\r\n        return { provider: 'tavily', results: [], error: e.message };\r\n    }\r\n}\r\n\r\n// --- BRAVE SEARCH ---\r\nexport async function searchBrave(query: string, apiKey: string): Promise<ProviderResult> {\r\n    try {\r\n        const url = `https://api.search.brave.com/res/v1/web/search?q=${encodeURIComponent(query)}&count=5`;\r\n        const response = await fetch(url, {\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'X-Subscription-Token': apiKey\r\n            }\r\n        });\r\n\r\n        if (!response.ok) throw new Error(`Brave error: ${response.statusText}`);\r\n        const data = await response.json();\r\n\r\n        // Brave structure: web.results[]\r\n        const results: SearchResult[] = (data.web?.results || []).map((r: any) => ({\r\n            title: r.title,\r\n            url: r.url,\r\n            content: r.content,\r\n            description: r.description || r.snippet || '',\r\n        }));\r\n\r\n        return { provider: 'brave', results };\r\n    } catch (e: any) {\r\n        console.error('Brave Search Failed:', e.message);\r\n        return { provider: 'brave', results: [], error: e.message };\r\n    }\r\n}\r\n\r\n// --- SERPER.DEV ---\r\nexport async function searchSerper(query: string, apiKey: string): Promise<ProviderResult> {\r\n    try {\r\n        const response = await fetch('https://google.serper.dev/search', {\r\n            method: 'POST',\r\n            headers: {\r\n                'X-API-KEY': apiKey,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({ q: query, num: 5 })\r\n        });\r\n\r\n        if (!response.ok) throw new Error(`Serper error: ${response.statusText}`);\r\n        const data = await response.json();\r\n\r\n        // 1. Organic Results\r\n        const results: SearchResult[] = (data.organic || []).map((r: any) => ({\r\n            title: r.title,\r\n            url: r.link,\r\n            content: r.snippet || '',\r\n        }));\r\n\r\n        // 2. Knowledge Graph (Extract if available)\r\n        if (data.knowledgeGraph) {\r\n            results.unshift({\r\n                title: `[Knowledge Graph] ${data.knowledgeGraph.title || query}`,\r\n                url: data.knowledgeGraph.website || 'https://google.com',\r\n                content: `${data.knowledgeGraph.description || ''} ${data.knowledgeGraph.attributes ? JSON.stringify(data.knowledgeGraph.attributes) : ''}`\r\n            });\r\n        }\r\n\r\n        // 3. People Also Ask (Extract definitions/facts)\r\n        if (data.peopleAlsoAsk && data.peopleAlsoAsk.length > 0) {\r\n            const paaContent = data.peopleAlsoAsk.map((p: any) => `Q: ${p.question} A: ${p.snippet}`).join(' | ');\r\n            results.push({\r\n                title: '[People Also Ask] Related Questions',\r\n                url: 'https://google.com',\r\n                content: paaContent\r\n            });\r\n        }\r\n\r\n        return { provider: 'serper', results };\r\n    } catch (e: any) {\r\n        console.error('Serper Search Failed:', e.message);\r\n        return { provider: 'serper', results: [], error: e.message };\r\n    }\r\n}\r\n\r\n// --- GEMINI GROUNDING ---\r\n\r\nexport async function searchGemini(query: string, apiKey: string): Promise<ProviderResult> {\r\n    const genAI = new GoogleGenerativeAI(apiKey);\r\n    // Fallback to 1.5-flash failing (404), so retry 2.0-flash-exp which exists.\r\n    // With robust parsing, this should now work.\r\n    const model = genAI.getGenerativeModel({\r\n        model: \"gemini-2.0-flash-exp\",\r\n        tools: [{ googleSearchRetrieval: {} }]\r\n    });\r\n\r\n    const prompt = `Perform a google search for: \"${query}\".\r\n    Return a JSON object with a key \"results\" which is an array of the top 5 search results.\r\n    Each result must have:\r\n    - \"title\": string\r\n    - \"url\": string\r\n    - \"content\": string (a brief summary or snippet of the page info)\r\n    Ensure the output is raw JSON only, no markdown formatting.`;\r\n\r\n    let attempt = 0;\r\n    const maxAttempts = 2;\r\n\r\n    while (attempt < maxAttempts) {\r\n        try {\r\n            const result = await model.generateContent(prompt);\r\n            const text = result.response.text();\r\n\r\n            let data;\r\n            let jsonStr = \"\";\r\n            try {\r\n                // Robust JSON extraction: look for { \"results\": ... }\r\n                const match = text.match(/\\{[\\s\\S]*\\}/);\r\n                if (match) {\r\n                    jsonStr = match[0];\r\n                    data = JSON.parse(jsonStr);\r\n                } else {\r\n                    throw new Error(\"No JSON object found in response\");\r\n                }\r\n            } catch (parseError) {\r\n                console.error(\"Gemini Search Parse Error. Raw text:\", text);\r\n                // FAILSAFE: If JSON fails, treat the whole response as one \"source\"\r\n                return {\r\n                    provider: 'gemini',\r\n                    results: [{\r\n                        title: \"Gemini Research Summary (Fallback)\",\r\n                        url: \"https://google.com/search?q=\" + encodeURIComponent(query),\r\n                        content: text\r\n                    }]\r\n                };\r\n            }\r\n\r\n            const results: SearchResult[] = (data.results || []).map((r: any) => ({\r\n                title: r.title,\r\n                url: r.url,\r\n                content: r.content,\r\n            }));\r\n\r\n            if (results.length === 0) {\r\n                console.warn(\"Gemini returned 0 results. Raw response:\", text);\r\n                return {\r\n                    provider: 'gemini',\r\n                    results: [{\r\n                        title: \"Gemini Research (Raw)\",\r\n                        url: \"#\",\r\n                        content: text\r\n                    }]\r\n                };\r\n            }\r\n\r\n            return { provider: 'gemini', results };\r\n\r\n        } catch (e: any) {\r\n            // CHECK FOR RATE LIMIT (429)\r\n            if (e.message.includes('429') && attempt < maxAttempts - 1) {\r\n                console.warn(`Gemini 429 Rate Limit hit. Retrying in ${SLEEP_MS / 1000}s...`);\r\n                await wait(SLEEP_MS);\r\n                attempt++;\r\n                continue; // Retry loop\r\n            }\r\n\r\n            console.error('Gemini Search Failed:', e.message);\r\n            return { provider: 'gemini', results: [], error: `Gemini Error: ${e.message}` };\r\n        }\r\n    }\r\n\r\n    return { provider: 'gemini', results: [], error: \"Gemini Failed after retries.\" };\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\seed.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\supabase.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":46,"column":19,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":46,"endColumn":22,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1111,1114],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1111,1114],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":66,"column":23,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":66,"endColumn":26,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1534,1537],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1534,1537],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"\r\nimport { createClient } from '@supabase/supabase-js';\r\n\r\n// Environment variable validation\r\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL;\r\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;\r\n\r\nif (!supabaseUrl || !supabaseAnonKey) {\r\n  throw new Error('FATAL: Supabase URL or Anon Key is missing from environment variables.');\r\n}\r\n\r\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey);\r\n\r\n// --- Type Definitions (Matches Database Schema) ---\r\n\r\nexport interface Phase {\r\n  id: string; // UUID\r\n  name: string;\r\n  description?: string;\r\n  order: number;\r\n  article_count: number;\r\n  created_at?: string;\r\n}\r\n\r\nexport interface Category {\r\n  id: string; // UUID\r\n  phase_id: string;\r\n  name: string;\r\n  article_count: number;\r\n  created_at?: string;\r\n}\r\n\r\nexport interface Subcategory {\r\n  id: string; // UUID\r\n  category_id: string;\r\n  name: string;\r\n  article_count: number;\r\n  created_at?: string;\r\n}\r\n\r\nexport interface Topic {\r\n  id: string; // UUID\r\n  subcategory_id: string;\r\n  title: string;\r\n  status: 'pending' | 'in-progress' | 'done';\r\n  research_data?: any; // JSONB\r\n  created_at?: string;\r\n}\r\n\r\nexport interface Article {\r\n  id: string; // UUID\r\n  topic_id?: string;\r\n  title: string;\r\n  content: string;\r\n  category?: string;\r\n  status: 'draft' | 'ready' | 'scheduled' | 'published';\r\n  created_at?: string;\r\n  publish_date?: string;\r\n}\r\n\r\nexport interface Keyword {\r\n  id: string; // UUID\r\n  phrase: string;\r\n  model?: string;\r\n  category?: string;\r\n  intent_indicators?: any; // JSONB\r\n  volume: 'low' | 'medium' | 'high';\r\n  notes?: string;\r\n  status: 'pending' | 'approved' | 'rejected';\r\n  created_at?: string;\r\n}\r\n\r\nexport interface PublishItem {\r\n  id: string;\r\n  article_id: string;\r\n  scheduled_date: string;\r\n  scheduled_time: string;\r\n  status: 'scheduled' | 'published' | 'cancelled';\r\n  articles?: Article; // Join result\r\n}\r\n\r\n// --- Dashboard Stats Helper ---\r\n\r\nexport async function getDashboardStats() {\r\n  try {\r\n    const [articlesRes, topicsRes, publishedRes] = await Promise.all([\r\n      supabase.from('articles').select('id', { count: 'exact', head: true }),\r\n      supabase.from('topics').select('id', { count: 'exact', head: true }).eq('status', 'pending'),\r\n      supabase.from('articles').select('id', { count: 'exact', head: true }).eq('status', 'published'),\r\n    ]);\r\n\r\n    return {\r\n      articlesCreated: articlesRes.count || 0,\r\n      pendingTopics: topicsRes.count || 0,\r\n      readyToPublish: (articlesRes.count || 0) - (publishedRes.count || 0),\r\n      published: publishedRes.count || 0,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error fetching dashboard stats:', error);\r\n    return {\r\n      articlesCreated: 0,\r\n      pendingTopics: 0,\r\n      readyToPublish: 0,\r\n      published: 0,\r\n    };\r\n  }\r\n}\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\supabaseAdmin.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\lib\\types.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\middleware.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\next.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\postcss.config.mjs","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\scripts\\test-system-health.ts","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":38,"column":21,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":38,"endColumn":24,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1454,1457],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1454,1457],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":56,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":56,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2439,2442],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2439,2442],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":76,"column":25,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":76,"endColumn":28,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[3343,3346],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[3343,3346],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"prefer-const","severity":2,"message":"'msg' is never reassigned. Use 'const' instead.","line":77,"column":21,"nodeType":"Identifier","messageId":"useConst","endLine":77,"endColumn":24,"fix":{"range":[3367,3393],"text":"const msg = e.message || \"\";"}}],"suppressedMessages":[],"errorCount":4,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":1,"fixableWarningCount":0,"source":"import dotenv from 'dotenv';\r\nimport { Groq } from 'groq-sdk';\r\nimport { GoogleGenerativeAI } from '@google/generative-ai';\r\n\r\ndotenv.config({ path: '.env.local' });\r\n\r\nasync function checkSystemHealth() {\r\n    console.log(\"\\nüè• SYSTEM HEALTH CHECK [Deep Diagnostic]\\n\" + \"=\".repeat(50));\r\n\r\n    const keys = {\r\n        GROQ: process.env.GROQ_API_KEY,\r\n        GEMINI: process.env.GEMINI_API_KEY,\r\n        OPENROUTER: process.env.OPENROUTER_API_KEY\r\n    };\r\n\r\n    // 1. API KEY AUDIT\r\n    console.log(\"üîë API KEY AUDIT:\");\r\n    for (const [name, key] of Object.entries(keys)) {\r\n        if (!key) console.log(`   ‚ùå ${name}: MISSING`);\r\n        else console.log(`   ‚úÖ ${name}: Present (${key.substring(0, 8)}...)`);\r\n    }\r\n    console.log(\"\");\r\n\r\n    // 2. GROQ HEALTH CHECK (Latency & Limits)\r\n    if (keys.GROQ) {\r\n        console.log(\"ü¶ô GROQ DIAGNOSTIC (Llama 3.3):\");\r\n        try {\r\n            const groq = new Groq({ apiKey: keys.GROQ });\r\n            const start = Date.now();\r\n            const completion = await groq.chat.completions.create({\r\n                messages: [{ role: \"user\", content: \"Ping\" }],\r\n                model: \"llama-3.3-70b-versatile\",\r\n                max_completion_tokens: 10\r\n            });\r\n            const latency = Date.now() - start;\r\n            console.log(`   ‚úÖ STATUS: ONLINE (${latency}ms)`);\r\n            console.log(`   üìù RESPONSE: \"${completion.choices[0]?.message?.content}\"`);\r\n        } catch (e: any) {\r\n            console.log(`   ‚ùå STATUS: FAILED (${e.message})`);\r\n            if (e.message.includes(\"429\")) console.log(\"   ‚ö†Ô∏è  WARNING: Rate Limit Exceeded (12k TPM?)\");\r\n        }\r\n    }\r\n\r\n    // 3. OPENROUTER HEALTH CHECK (Payment & Access)\r\n    if (keys.OPENROUTER) {\r\n        console.log(\"\\nüåê OPENROUTER DIAGNOSTIC (Mimo/Chimera):\");\r\n        const scanOpenRouter = async (model: string) => {\r\n            try {\r\n                const res = await fetch(\"https://openrouter.ai/api/v1/chat/completions\", {\r\n                    method: \"POST\",\r\n                    headers: { \"Authorization\": `Bearer ${keys.OPENROUTER}`, \"Content-Type\": \"application/json\" },\r\n                    body: JSON.stringify({ model: model, messages: [{ role: \"user\", content: \"Ping\" }] })\r\n                });\r\n                if (res.ok) console.log(`   ‚úÖ ${model}: ONLINE`);\r\n                else console.log(`   ‚ùå ${model}: FAILED (${res.status} ${res.statusText})`);\r\n            } catch (e: any) {\r\n                console.log(`   ‚ùå ${model}: NETWORK ERROR (${e.message})`);\r\n            }\r\n        };\r\n        await scanOpenRouter(\"tngtech/deepseek-r1t2-chimera:free\");\r\n        await scanOpenRouter(\"google/gemini-2.0-flash-lite-preview-02-05:free\");\r\n    }\r\n\r\n    // 4. GOOGLE GEMINI HEALTH CHECK (Quota & Models)\r\n    if (keys.GEMINI) {\r\n        console.log(\"\\nüíé GEMINI DIAGNOSTIC (Google Direct):\");\r\n        const genAI = new GoogleGenerativeAI(keys.GEMINI);\r\n        const models = [\"gemini-1.5-flash\", \"gemini-1.5-flash-8b\", \"gemini-2.0-flash-exp\"];\r\n\r\n        for (const m of models) {\r\n            try {\r\n                const model = genAI.getGenerativeModel({ model: m });\r\n                const result = await model.generateContent(\"Ping\");\r\n                const text = result.response.text();\r\n                if (text) console.log(`   ‚úÖ ${m}: ONLINE`);\r\n            } catch (e: any) {\r\n                let msg = e.message || \"\";\r\n                if (msg.includes(\"429\")) console.log(`   üî∏ ${m}: RATE LIMITED (429)`);\r\n                else if (msg.includes(\"404\")) console.log(`   ‚ùå ${m}: NOT FOUND (404)`);\r\n                else console.log(`   ‚ùå ${m}: FAILED (${msg.substring(0, 50)})`);\r\n            }\r\n        }\r\n    }\r\n    console.log(\"\\n\" + \"=\".repeat(50) + \"\\nDIAGNOSTIC COMPLETE\");\r\n}\r\n\r\ncheckSystemHealth();\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\vitest.config.mts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\ASUS\\Downloads\\WEBSITE\\BLOG APP\\BLOG APP\\vitest.setup.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]